[
["basics-data-types-import-and-export-data.html", "Chapter 5 Basics - Data types, import and export data 5.1 Data types 5.2 Import data 5.3 Export data", " Chapter 5 Basics - Data types, import and export data 5.1 Data types 5.1.1 Data Frames Los data frames nos permiten trabajar en el familiar formato de “hoja excel”, combinando números, texto, etc. en la misma tabla. 5.1.2 Matrices Cuando trabajamos únicamente con datos numéricos, las matrices son el método más rápido. 5.1.3 Listas Las listas son una manera de almacenar datos muy potente pero cuya exploración puede resultar algo complicada. A continuación de puede ver una manera de visualizar interactivamente el contenido de una lista compleja. if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;) ## Loading required package: pacman # p_load(repurrrsive) # listviewer::jsonedit(got_chars) El paquete repurrrsive de Jenny Bryan, contiene algunas listas para usar como ejemplos. Ver su Github para más detalles, o mejor, su página web. Ésta contiene varios tutoriales muy interesantes. 5.2 Import data 5.2.1 From CSV file Vamos a usar la siguiente base de datos. Tras descargar el archivo de arriba, lo moveremos a nuestro directorio de trabajo ‘R workshop’. Una vez ahí, podemos usar alguna de las siguientes funciones para leer el archivo: read_csv() - comma separated values read_csv2() - semicolon separated values read_delim( , delim = &quot;|&quot;) - values separated by an arbitrary delimiter # Cargamos librerias if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;) p_load(tidyverse) # Establecemos directorio de trabajo # setwd(&quot;R workshop&quot;) #Importar los datos datos = read_csv(&quot;Data/04-Data_types_import_export/Import_CSV.csv&quot;) #Muestra las primeras 10 observaciones datos ## # A tibble: 103 x 8 ## X1 ID Genero Edad Educacion FollowUP condition PPV_DECLARED ## &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;int&gt; ## 1 4 41904 1 47 8 80 PPV_Cond1 99 ## 2 5 95041 2 21 6 90 PPV_Cond1 99 ## 3 6 74594 2 29 6 10 PPV_Cond1 99 ## 4 15 72903 2 27 7 75 PPV_Cond1 1 ## 5 16 21260 1 29 5 35 PPV_Cond1 24 ## 6 18 50315 2 28 6 14 PPV_Cond1 99 ## 7 19 21774 2 27 4 2 PPV_Cond1 99 ## 8 20 20881 2 55 6 89 PPV_Cond1 99 ## 9 21 39751 2 28 6 6 PPV_Cond1 99 ## 10 22 99384 1 46 5 0 PPV_Cond1 1 ## # ... with 93 more rows En el panel ‘Environment’ veremos que aparece datos: Haciendo click en datos abrimos una pestaña donde podemos ver el contenido de ese data frame. También podemos visualizarlo usando el codigo View(datos) 5.2.2 From XLS’ file (Excel) Vamos a usar la siguiente base de datos. # Cargamos librerias if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;) p_load(readxl) # Establecemos directorio de trabajo # setwd(&quot;R workshop&quot;) #Importar los datos datos = read_excel(&quot;Data/04-Data_types_import_export/Import_XLS.xls&quot;) #Muestra las primeras 10 observaciones datos ## # A tibble: 237 x 13 ## name wais… bost… mora… mora… mini… eqsc… sex age wais… eyes sass… ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1.00 34.0 28.0 1.00 1.00 29.0 63.0 0 62.0 13.0 12.0 40.0 ## 2 2.00 13.0 23.0 NA 0 23.0 55.0 0 53.0 8.00 11.0 43.0 ## 3 3.00 20.0 16.0 1.00 1.00 26.0 27.0 0 18.0 14.0 12.0 38.0 ## 4 4.00 24.0 23.0 1.00 1.00 21.0 33.0 0 40.0 14.0 8.00 48.0 ## 5 5.00 20.0 24.0 1.00 1.00 18.0 35.0 1.00 65.0 15.0 9.00 48.0 ## 6 6.00 2.00 3.00 0 0 23.0 38.0 NA NA 12.0 12.0 35.0 ## 7 7.00 13.0 15.0 1.00 NA 19.0 38.0 0 56.0 5.00 5.00 16.0 ## 8 8.00 27.0 18.0 1.00 0 15.0 42.0 1.00 70.0 8.00 10.0 41.0 ## 9 9.00 37.0 28.0 1.00 0 23.0 36.0 0 43.0 23.0 14.0 38.0 ## 10 10.0 27.0 24.0 0 0 20.0 51.0 1.00 52.0 9.00 12.0 24.0 ## # ... with 227 more rows, and 1 more variable: ifs_score &lt;dbl&gt; 5.2.3 From SAV file (SPSS) Vamos a usar la siguiente base de datos. # Cargamos librerias if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;) p_load(haven) # Establecemos directorio de trabajo # setwd(&quot;R workshop&quot;) #Importar los datos datos = read_sav(&quot;Data/04-Data_types_import_export/Import_SAV.sav&quot;) #Muestra las primeras 10 observaciones datos ## # A tibble: 237 x 13 ## ID wais… bost… mora… mora… mini… eqsc… sex age wais… eyes sass… ## &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; ## 1 1.00 34.0 28.0 1.00 1.00 29.0 63.0 0 62.0 13.0 12.0 40.0 ## 2 2.00 13.0 23.0 NA 0 23.0 55.0 0 53.0 8.00 11.0 43.0 ## 3 3.00 20.0 16.0 1.00 1.00 26.0 27.0 0 18.0 14.0 12.0 38.0 ## 4 4.00 24.0 23.0 1.00 1.00 21.0 33.0 0 40.0 14.0 8.00 48.0 ## 5 5.00 20.0 24.0 1.00 1.00 18.0 35.0 1.00 65.0 15.0 9.00 48.0 ## 6 6.00 2.00 3.00 0 0 23.0 38.0 NA NA 12.0 12.0 35.0 ## 7 7.00 13.0 15.0 1.00 NA 19.0 38.0 0 56.0 5.00 5.00 16.0 ## 8 8.00 27.0 18.0 1.00 0 15.0 42.0 1.00 70.0 8.00 10.0 41.0 ## 9 9.00 37.0 28.0 1.00 0 23.0 36.0 0 43.0 23.0 14.0 38.0 ## 10 10.0 27.0 24.0 0 0 20.0 51.0 1.00 52.0 9.00 12.0 24.0 ## # ... with 227 more rows, and 1 more variable: ifs_score &lt;dbl&gt; 5.2.4 Import all files from a folder Vamos a usar los siguientes archivos. Tendrás que descomprimirlos en una carpeta antes de usarlos. 5.2.4.1 Using purrr From: https://gist.github.com/ColinFay/d74d331825868b181860212cd1577b69 by @_ColinFay library(tidyverse) files &lt;- list.files(&quot;Data/04-Data_types_import_export/CSVs&quot;, pattern = &quot;^0&quot;, full.names = TRUE) full &lt;- map_df(files, read_csv) dplyr::glimpse(full) ## Observations: 1,200 ## Variables: 9 ## $ Sex &lt;chr&gt; &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;male&quot;, &quot;mal... ## $ Priming &lt;chr&gt; &quot;Collective&quot;, &quot;Collective&quot;, &quot;Collective&quot;, &quot;Collectiv... ## $ trialN &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1... ## $ Block &lt;chr&gt; &quot;we&quot;, &quot;we&quot;, &quot;we&quot;, &quot;we&quot;, &quot;we&quot;, &quot;we&quot;, &quot;we&quot;, &quot;we&quot;, &quot;we&quot;... ## $ Adjective &lt;chr&gt; &quot;ofensivo&quot;, &quot;resentido&quot;, &quot;ego�sta&quot;, &quot;indiscreto&quot;, &quot;s... ## $ Valence &lt;chr&gt; &quot;negative&quot;, &quot;negative&quot;, &quot;negative&quot;, &quot;negative&quot;, &quot;neg... ## $ Answer &lt;chr&gt; &quot;yes&quot;, &quot;no&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes&quot;, &quot;yes... ## $ Arrow &lt;chr&gt; &quot;left&quot;, &quot;right&quot;, &quot;left&quot;, &quot;left&quot;, &quot;left&quot;, &quot;left&quot;, &quot;le... ## $ rT &lt;int&gt; 623, 1235, 335, 355, 618, 328, 348, 1620, 346, 778, ... # Including filenames in a column files &lt;- list.files(&quot;Data/04-Data_types_import_export/CSVs&quot;, pattern = &quot;^0&quot;, full.names = TRUE) %&gt;% set_names(basename(.)) full2 &lt;- map_df(files, read_csv, .id = &quot;file&quot;) full2 ## # A tibble: 1,200 x 10 ## file Sex Priming trialN Block Adjective Vale… Answ… Arrow rT ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 01.csv male Collective 1 we ofensivo nega… yes left 623 ## 2 01.csv male Collective 2 we resentido nega… no right 1235 ## 3 01.csv male Collective 3 we ego�sta nega… yes left 335 ## 4 01.csv male Collective 4 we indiscreto nega… yes left 355 ## 5 01.csv male Collective 5 we sumiso nega… yes left 618 ## 6 01.csv male Collective 6 we agradable posi… yes left 328 ## 7 01.csv male Collective 7 we clasista nega… yes left 348 ## 8 01.csv male Collective 8 we altruista posi… yes left 1620 ## 9 01.csv male Collective 9 we ansioso nega… yes left 346 ## 10 01.csv male Collective 10 we presumido nega… yes left 778 ## # ... with 1,190 more rows 5.2.4.2 Traditional way if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;) p_load(tidyverse) # We list all files in the desired folder Path_Folder = &quot;Data/04-Data_types_import_export/CSVs/&quot; file.list &lt;- paste0(Path_Folder, list.files(Path_Folder)); file.list ## [1] &quot;Data/04-Data_types_import_export/CSVs/01.csv&quot; ## [2] &quot;Data/04-Data_types_import_export/CSVs/02.csv&quot; ## [3] &quot;Data/04-Data_types_import_export/CSVs/03.csv&quot; ## [4] &quot;Data/04-Data_types_import_export/CSVs/CSVs.zip&quot; # Method 1 # Read and bind all of them # We can use the function read_csv or any other df = lapply(file.list, read_csv) %&gt;% bind_rows(.id = &quot;ID&quot;) df ## # A tibble: 1,600 x 10 ## ID Sex Priming trialN Block Adjective Valen… Answ… Arrow rT ## &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 1 male Collective 1 we ofensivo negat… yes left 623 ## 2 1 male Collective 2 we resentido negat… no right 1235 ## 3 1 male Collective 3 we ego�sta negat… yes left 335 ## 4 1 male Collective 4 we indiscreto negat… yes left 355 ## 5 1 male Collective 5 we sumiso negat… yes left 618 ## 6 1 male Collective 6 we agradable posit… yes left 328 ## 7 1 male Collective 7 we clasista negat… yes left 348 ## 8 1 male Collective 8 we altruista posit… yes left 1620 ## 9 1 male Collective 9 we ansioso negat… yes left 346 ## 10 1 male Collective 10 we presumido negat… yes left 778 ## # ... with 1,590 more rows # Method 2 df = do.call(rbind, lapply(file.list, function(x) read_csv(x))) #%&gt;% select(Rut, Nota, Prueba))) # We can add this if we have a set of common columns df ## # A tibble: 1,600 x 9 ## Sex Priming trialN Block Adjective Valence Answer Arrow rT ## &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; ## 1 male Collective 1 we ofensivo negative yes left 623 ## 2 male Collective 2 we resentido negative no right 1235 ## 3 male Collective 3 we ego�sta negative yes left 335 ## 4 male Collective 4 we indiscreto negative yes left 355 ## 5 male Collective 5 we sumiso negative yes left 618 ## 6 male Collective 6 we agradable positive yes left 328 ## 7 male Collective 7 we clasista negative yes left 348 ## 8 male Collective 8 we altruista positive yes left 1620 ## 9 male Collective 9 we ansioso negative yes left 346 ## 10 male Collective 10 we presumido negative yes left 778 ## # ... with 1,590 more rows 5.2.5 Import files using RStudio Vamos a usar la siguiente base de datos. A partir de la version 1.0 de RStudio podemos importar archivos de datos usando la interfaz gráfica - Panel Environment &gt; Import Dataset, arriba a la derecha. En cualquier caso, para que lo que hacemos sea reproducible, es recomendable trabajar con código. 5.3 Export data 5.3.1 Export data to CSV file # Carga libreria if (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;) p_load(tidyverse) # Volcamos datos a archivo write_csv(datos, &quot;Data/04-Data_types_import_export/Export_saved_file.csv&quot;) "]
]
