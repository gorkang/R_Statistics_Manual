<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R - Statistics Manual</title>
  <meta name="description" content="Statistics manual from CSCN.">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R - Statistics Manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Statistics manual from CSCN." />
  <meta name="github-repo" content="gorkang/R_Statistics_Manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R - Statistics Manual" />
  
  <meta name="twitter:description" content="Statistics manual from CSCN." />
  

<meta name="author" content="Center for Social and Cognitive Neuroscience - cscn.uai.cl">


<meta name="date" content="2018-08-28">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="pre-processing.html">
<link rel="next" href="classification.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.2/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.3.1/str_view.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.4/datatables.js"></script>
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.16/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#for-users"><i class="fa fa-check"></i><b>1.1</b> For USERS</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#for-developers-and-statisticians"><i class="fa fa-check"></i><b>1.2</b> For Developers and Statisticians</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i><b>1.3</b> Contributors</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#todo"><i class="fa fa-check"></i><b>1.4</b> TODO</a><ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#inferential-analysis"><i class="fa fa-check"></i><b>1.4.1</b> Inferential analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Empezando.html"><a href="Empezando.html"><i class="fa fa-check"></i><b>2</b> Empezando en A-B-C</a><ul>
<li class="chapter" data-level="2.1" data-path="Empezando.html"><a href="Empezando.html#a-instalar-r."><i class="fa fa-check"></i><b>2.1</b> <strong>(A)</strong> Instalar R.</a></li>
<li class="chapter" data-level="2.2" data-path="Empezando.html"><a href="Empezando.html#b-instalar-rstudio."><i class="fa fa-check"></i><b>2.2</b> <strong>(B)</strong> Instalar RStudio.</a></li>
<li class="chapter" data-level="2.3" data-path="Empezando.html"><a href="Empezando.html#instalar-packages"><i class="fa fa-check"></i><b>2.3</b> Instalar Packages</a></li>
<li class="chapter" data-level="2.4" data-path="Empezando.html"><a href="Empezando.html#cargar-packages"><i class="fa fa-check"></i><b>2.4</b> Cargar Packages</a></li>
<li class="chapter" data-level="2.5" data-path="Empezando.html"><a href="Empezando.html#todo-en-uno"><i class="fa fa-check"></i><b>2.5</b> Todo en uno</a></li>
<li class="chapter" data-level="2.6" data-path="Empezando.html"><a href="Empezando.html#c-librerias-para-el-workshop"><i class="fa fa-check"></i><b>2.6</b> <strong>(C)</strong> Librerias para el workshop</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html"><i class="fa fa-check"></i><b>3</b> Mi primer script</a><ul>
<li class="chapter" data-level="3.1" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html#paso-a-paso"><i class="fa fa-check"></i><b>3.1</b> Paso a paso</a></li>
<li class="chapter" data-level="3.2" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html#establecer-nuestro-directorio-de-trabajo"><i class="fa fa-check"></i><b>3.2</b> Establecer nuestro directorio de trabajo</a></li>
<li class="chapter" data-level="3.3" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html#nuestro-primer-script"><i class="fa fa-check"></i><b>3.3</b> Nuestro primer script</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html"><i class="fa fa-check"></i><b>4</b> Conseguir ayuda y aprender más</a><ul>
<li class="chapter" data-level="4.1" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#cuando-sabemos-que-funcion-usar-pero-dudamos-de-la-sintaxis"><i class="fa fa-check"></i><b>4.1</b> Cuando sabemos que función usar, pero dudamos de la sintaxis:</a></li>
<li class="chapter" data-level="4.2" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#cuando-sabemos-lo-que-queremos-hacer-pero-no-la-funcion-que-debemos-usar"><i class="fa fa-check"></i><b>4.2</b> Cuando sabemos lo que queremos hacer pero no la función que debemos usar:</a></li>
<li class="chapter" data-level="4.3" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#libros-y-web-recomendados"><i class="fa fa-check"></i><b>4.3</b> Libros y Web recomendados</a><ul>
<li class="chapter" data-level="4.3.1" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#hadley-wickhams-books"><i class="fa fa-check"></i><b>4.3.1</b> Hadley Wickham’s books</a></li>
<li class="chapter" data-level="4.3.2" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#learning-statistics-with-r"><i class="fa fa-check"></i><b>4.3.2</b> Learning statistics with R</a></li>
<li class="chapter" data-level="4.3.3" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#pirate-guide-to-r"><i class="fa fa-check"></i><b>4.3.3</b> Pirate guide to R</a></li>
<li class="chapter" data-level="4.3.4" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#plots"><i class="fa fa-check"></i><b>4.3.4</b> Plots</a></li>
<li class="chapter" data-level="4.3.5" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#other-references"><i class="fa fa-check"></i><b>4.3.5</b> Other references</a></li>
<li class="chapter" data-level="4.3.6" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#twitter"><i class="fa fa-check"></i><b>4.3.6</b> Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html"><i class="fa fa-check"></i><b>5</b> Basics - Data types, import and export data</a><ul>
<li class="chapter" data-level="5.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#data-types"><i class="fa fa-check"></i><b>5.1</b> Data types</a><ul>
<li class="chapter" data-level="5.1.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#data-frames"><i class="fa fa-check"></i><b>5.1.1</b> Data Frames</a></li>
<li class="chapter" data-level="5.1.2" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#matrices"><i class="fa fa-check"></i><b>5.1.2</b> Matrices</a></li>
<li class="chapter" data-level="5.1.3" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#listas"><i class="fa fa-check"></i><b>5.1.3</b> Listas</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#import-data"><i class="fa fa-check"></i><b>5.2</b> Import data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#from-csv-file"><i class="fa fa-check"></i><b>5.2.1</b> From CSV file</a></li>
<li class="chapter" data-level="5.2.2" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#from-xls-file-excel"><i class="fa fa-check"></i><b>5.2.2</b> From XLS’ file (Excel)</a></li>
<li class="chapter" data-level="5.2.3" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#from-sav-file-spss"><i class="fa fa-check"></i><b>5.2.3</b> From SAV file (SPSS)</a></li>
<li class="chapter" data-level="5.2.4" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#import-all-files-from-a-folder"><i class="fa fa-check"></i><b>5.2.4</b> Import all files from a folder</a></li>
<li class="chapter" data-level="5.2.5" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#import-files-using-rstudio"><i class="fa fa-check"></i><b>5.2.5</b> Import files using RStudio</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#export-data"><i class="fa fa-check"></i><b>5.3</b> Export data</a><ul>
<li class="chapter" data-level="5.3.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#export-data-to-csv-file"><i class="fa fa-check"></i><b>5.3.1</b> Export data to CSV file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Manipular-datos.html"><a href="Manipular-datos.html"><i class="fa fa-check"></i><b>6</b> Manipular datos</a><ul>
<li class="chapter" data-level="6.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#leer-y-guardar-datos"><i class="fa fa-check"></i><b>6.1</b> Leer y guardar datos</a><ul>
<li class="chapter" data-level="6.1.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#leer-datos"><i class="fa fa-check"></i><b>6.1.1</b> Leer datos</a></li>
<li class="chapter" data-level="6.1.2" data-path="Manipular-datos.html"><a href="Manipular-datos.html#guardar-db-a-archivo"><i class="fa fa-check"></i><b>6.1.2</b> Guardar DB a archivo</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="Manipular-datos.html"><a href="Manipular-datos.html#ver-output-vs-asignar-output"><i class="fa fa-check"></i><b>6.2</b> Ver output vs asignar output</a></li>
<li class="chapter" data-level="6.3" data-path="Manipular-datos.html"><a href="Manipular-datos.html#verbos-de-dplyr"><i class="fa fa-check"></i><b>6.3</b> Verbos de dplyr</a><ul>
<li class="chapter" data-level="6.3.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#filtrar-datos"><i class="fa fa-check"></i><b>6.3.1</b> Filtrar datos</a></li>
<li class="chapter" data-level="6.3.2" data-path="Manipular-datos.html"><a href="Manipular-datos.html#ordenar-db"><i class="fa fa-check"></i><b>6.3.2</b> Ordenar DB</a></li>
<li class="chapter" data-level="6.3.3" data-path="Manipular-datos.html"><a href="Manipular-datos.html#seleccionar-variables"><i class="fa fa-check"></i><b>6.3.3</b> Seleccionar variables</a></li>
<li class="chapter" data-level="6.3.4" data-path="Manipular-datos.html"><a href="Manipular-datos.html#renombrar-variables"><i class="fa fa-check"></i><b>6.3.4</b> Renombrar variables</a></li>
<li class="chapter" data-level="6.3.5" data-path="Manipular-datos.html"><a href="Manipular-datos.html#separate-contents-of-a-single-variable"><i class="fa fa-check"></i><b>6.3.5</b> Separate contents of a single variable</a></li>
<li class="chapter" data-level="6.3.6" data-path="Manipular-datos.html"><a href="Manipular-datos.html#wide-to-long-format"><i class="fa fa-check"></i><b>6.3.6</b> Wide to Long format</a></li>
<li class="chapter" data-level="6.3.7" data-path="Manipular-datos.html"><a href="Manipular-datos.html#long-to-wide"><i class="fa fa-check"></i><b>6.3.7</b> Long to wide</a></li>
<li class="chapter" data-level="6.3.8" data-path="Manipular-datos.html"><a href="Manipular-datos.html#omitir-nas"><i class="fa fa-check"></i><b>6.3.8</b> Omitir NAs</a></li>
<li class="chapter" data-level="6.3.9" data-path="Manipular-datos.html"><a href="Manipular-datos.html#eliminar-variables"><i class="fa fa-check"></i><b>6.3.9</b> Eliminar variables</a></li>
<li class="chapter" data-level="6.3.10" data-path="Manipular-datos.html"><a href="Manipular-datos.html#crear-nuevas-variables"><i class="fa fa-check"></i><b>6.3.10</b> Crear nuevas variables:</a></li>
<li class="chapter" data-level="6.3.11" data-path="Manipular-datos.html"><a href="Manipular-datos.html#recodificamos-datos"><i class="fa fa-check"></i><b>6.3.11</b> Recodificamos datos</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="Manipular-datos.html"><a href="Manipular-datos.html#combinar-bases-de-datos"><i class="fa fa-check"></i><b>6.4</b> Combinar bases de datos</a></li>
<li class="chapter" data-level="6.5" data-path="Manipular-datos.html"><a href="Manipular-datos.html#verbos-avanzados"><i class="fa fa-check"></i><b>6.5</b> Verbos avanzados</a><ul>
<li class="chapter" data-level="6.5.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#cambiar-multiples-columnas-de-un-tipo-a-otro"><i class="fa fa-check"></i><b>6.5.1</b> Cambiar multiples columnas de un tipo a otro</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="Manipular-datos.html"><a href="Manipular-datos.html#regular-expressions"><i class="fa fa-check"></i><b>6.6</b> Regular expressions</a></li>
<li class="chapter" data-level="6.7" data-path="Manipular-datos.html"><a href="Manipular-datos.html#tutoriales-externos"><i class="fa fa-check"></i><b>6.7</b> Tutoriales externos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html"><i class="fa fa-check"></i><b>7</b> Visualizar datos</a><ul>
<li class="chapter" data-level="7.1" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#other-resources"><i class="fa fa-check"></i><b>7.1</b> Other resources</a></li>
<li class="chapter" data-level="7.2" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#que-grafica-puedo-usar-wip"><i class="fa fa-check"></i><b>7.2</b> Que gráfica puedo usar (WIP)</a></li>
<li class="chapter" data-level="7.3" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#tipos-de-graficas"><i class="fa fa-check"></i><b>7.3</b> Tipos de gráficas</a><ul>
<li class="chapter" data-level="7.3.1" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#histogramas"><i class="fa fa-check"></i><b>7.3.1</b> Histogramas</a></li>
<li class="chapter" data-level="7.3.2" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#Pirate-Plot"><i class="fa fa-check"></i><b>7.3.2</b> Pirate plot</a></li>
<li class="chapter" data-level="7.3.3" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#barplots-with-individual-responses"><i class="fa fa-check"></i><b>7.3.3</b> Barplots with individual responses</a></li>
<li class="chapter" data-level="7.3.4" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#diagrama-de-caja-y-bigotes"><i class="fa fa-check"></i><b>7.3.4</b> Diagrama de caja y bigotes</a></li>
<li class="chapter" data-level="7.3.5" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#correlation-plot"><i class="fa fa-check"></i><b>7.3.5</b> Correlation plot</a></li>
<li class="chapter" data-level="7.3.6" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#beanplot"><i class="fa fa-check"></i><b>7.3.6</b> Beanplot</a></li>
<li class="chapter" data-level="7.3.7" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#scatterplot"><i class="fa fa-check"></i><b>7.3.7</b> Scatterplot</a></li>
<li class="chapter" data-level="7.3.8" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#scatterplot-con-3-variables"><i class="fa fa-check"></i><b>7.3.8</b> Scatterplot con 3 variables</a></li>
<li class="chapter" data-level="7.3.9" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#density-plots"><i class="fa fa-check"></i><b>7.3.9</b> Density plots</a></li>
<li class="chapter" data-level="7.3.10" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#density-ridges-plots-ggjoy"><i class="fa fa-check"></i><b>7.3.10</b> Density Ridges Plots (ggjoy)</a></li>
<li class="chapter" data-level="7.3.11" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#pp-plots"><i class="fa fa-check"></i><b>7.3.11</b> PP plots</a></li>
<li class="chapter" data-level="7.3.12" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#shaded-geom-area"><i class="fa fa-check"></i><b>7.3.12</b> Shaded geom area</a></li>
<li class="chapter" data-level="7.3.13" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#multiple-scatterplots"><i class="fa fa-check"></i><b>7.3.13</b> Multiple Scatterplots</a></li>
<li class="chapter" data-level="7.3.14" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#background-data"><i class="fa fa-check"></i><b>7.3.14</b> Background data</a></li>
<li class="chapter" data-level="7.3.15" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#flip-plots"><i class="fa fa-check"></i><b>7.3.15</b> Flip plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html"><i class="fa fa-check"></i><b>8</b> Estadistica descriptiva</a><ul>
<li class="chapter" data-level="8.1" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#summary-de-datos"><i class="fa fa-check"></i><b>8.1</b> Summary de datos</a><ul>
<li class="chapter" data-level="8.1.1" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#agrupamos-por-sujeto"><i class="fa fa-check"></i><b>8.1.1</b> Agrupamos por sujeto</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#descriptive-tables-latex"><i class="fa fa-check"></i><b>8.2</b> Descriptive tables latex</a></li>
<li class="chapter" data-level="8.3" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#visualize-missing-values"><i class="fa fa-check"></i><b>8.3</b> Visualize missing values</a></li>
<li class="chapter" data-level="8.4" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#tutorial-externo"><i class="fa fa-check"></i><b>8.4</b> Tutorial externo</a></li>
<li class="chapter" data-level="8.5" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#findviews"><i class="fa fa-check"></i><b>8.5</b> Findviews</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html"><i class="fa fa-check"></i><b>9</b> Estadistica inferencial</a><ul>
<li class="chapter" data-level="9.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#referencias-y-fuentes"><i class="fa fa-check"></i><b>9.1</b> Referencias y Fuentes</a></li>
<li class="chapter" data-level="9.2" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#association-test"><i class="fa fa-check"></i><b>9.2</b> Association test</a><ul>
<li class="chapter" data-level="9.2.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#frequentist-1"><i class="fa fa-check"></i><b>9.2.1</b> Frequentist</a></li>
<li class="chapter" data-level="9.2.2" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#bayesian-2"><i class="fa fa-check"></i><b>9.2.2</b> Bayesian</a></li>
<li class="chapter" data-level="9.2.3" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#results-report---wip"><i class="fa fa-check"></i><b>9.2.3</b> Results report - WIP</a></li>
<li class="chapter" data-level="9.2.4" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#references"><i class="fa fa-check"></i><b>9.2.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#anova-repeated-measures"><i class="fa fa-check"></i><b>9.3</b> ANOVA repeated measures</a></li>
<li class="chapter" data-level="9.4" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#mixed-models"><i class="fa fa-check"></i><b>9.4</b> Mixed Models</a></li>
<li class="chapter" data-level="9.5" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#meta-analysis"><i class="fa fa-check"></i><b>9.5</b> Meta analysis</a><ul>
<li class="chapter" data-level="9.5.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#natural-frequencies-effect"><i class="fa fa-check"></i><b>9.5.1</b> Natural Frequencies Effect</a></li>
<li class="chapter" data-level="9.5.2" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#pictures-effect"><i class="fa fa-check"></i><b>9.5.2</b> Pictures Effect</a></li>
<li class="chapter" data-level="9.5.3" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#notes-on-meta-analysis"><i class="fa fa-check"></i><b>9.5.3</b> Notes on Meta-analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Funciones.html"><a href="Funciones.html"><i class="fa fa-check"></i><b>10</b> Funciones</a><ul>
<li class="chapter" data-level="10.1" data-path="Funciones.html"><a href="Funciones.html#creando-mi-primera-funcion"><i class="fa fa-check"></i><b>10.1</b> Creando mi primera función</a><ul>
<li class="chapter" data-level="10.1.1" data-path="Funciones.html"><a href="Funciones.html#pirate-plot-original"><i class="fa fa-check"></i><b>10.1.1</b> Pirate plot original</a></li>
<li class="chapter" data-level="10.1.2" data-path="Funciones.html"><a href="Funciones.html#nuestra-funcion"><i class="fa fa-check"></i><b>10.1.2</b> Nuestra función</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="pre-processing.html"><a href="pre-processing.html"><i class="fa fa-check"></i><b>11</b> Pre-processing</a><ul>
<li class="chapter" data-level="11.1" data-path="pre-processing.html"><a href="pre-processing.html#rt-filtering"><i class="fa fa-check"></i><b>11.1</b> RT filtering</a><ul>
<li class="chapter" data-level="11.1.1" data-path="pre-processing.html"><a href="pre-processing.html#function-to-filter-by-rt"><i class="fa fa-check"></i><b>11.1.1</b> Function to filter by RT</a></li>
<li class="chapter" data-level="11.1.2" data-path="pre-processing.html"><a href="pre-processing.html#n-sd-from-the-median-mad-1"><i class="fa fa-check"></i><b>11.1.2</b> n SD from the median (MAD)</a></li>
<li class="chapter" data-level="11.1.3" data-path="pre-processing.html"><a href="pre-processing.html#gamma-law-regression-analyses-2"><i class="fa fa-check"></i><b>11.1.3</b> Gamma law regression analyses</a></li>
<li class="chapter" data-level="11.1.4" data-path="pre-processing.html"><a href="pre-processing.html#logarithms"><i class="fa fa-check"></i><b>11.1.4</b> Logarithms</a></li>
<li class="chapter" data-level="11.1.5" data-path="pre-processing.html"><a href="pre-processing.html#references-1"><i class="fa fa-check"></i><b>11.1.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="pre-processing.html"><a href="pre-processing.html#reliability"><i class="fa fa-check"></i><b>11.2</b> Reliability</a><ul>
<li class="chapter" data-level="11.2.1" data-path="pre-processing.html"><a href="pre-processing.html#cronbachs-alpha"><i class="fa fa-check"></i><b>11.2.1</b> Cronbach’s Alpha</a></li>
<li class="chapter" data-level="11.2.2" data-path="pre-processing.html"><a href="pre-processing.html#omega"><i class="fa fa-check"></i><b>11.2.2</b> Omega</a></li>
<li class="chapter" data-level="11.2.3" data-path="pre-processing.html"><a href="pre-processing.html#references-2"><i class="fa fa-check"></i><b>11.2.3</b> References</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="pre-processing.html"><a href="pre-processing.html#impute-missing-data"><i class="fa fa-check"></i><b>11.3</b> Impute missing data</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i><b>12</b> Experimental design</a><ul>
<li class="chapter" data-level="12.1" data-path="experimental-design.html"><a href="experimental-design.html#tamano-de-muestra-y-efecto-detectado"><i class="fa fa-check"></i><b>12.1</b> Tamaño de muestra y efecto detectado</a></li>
<li class="chapter" data-level="12.2" data-path="experimental-design.html"><a href="experimental-design.html#power-analysis"><i class="fa fa-check"></i><b>12.2</b> Power analysis</a><ul>
<li class="chapter" data-level="12.2.1" data-path="experimental-design.html"><a href="experimental-design.html#longitudinal-designs"><i class="fa fa-check"></i><b>12.2.1</b> Longitudinal designs</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="experimental-design.html"><a href="experimental-design.html#anonimizar-participantes---encriptar-ids"><i class="fa fa-check"></i><b>12.3</b> Anonimizar participantes - Encriptar IDs</a><ul>
<li class="chapter" data-level="12.3.1" data-path="experimental-design.html"><a href="experimental-design.html#encriptando-y-desencriptando-un-elemento"><i class="fa fa-check"></i><b>12.3.1</b> Encriptando y desencriptando un elemento</a></li>
<li class="chapter" data-level="12.3.2" data-path="experimental-design.html"><a href="experimental-design.html#encriptando-y-desencriptando-la-columna-rut-de-una-db-completa."><i class="fa fa-check"></i><b>12.3.2</b> Encriptando y desencriptando la columna RUT de una DB completa.</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="experimental-design.html"><a href="experimental-design.html#match-participants"><i class="fa fa-check"></i><b>12.4</b> Match participants</a></li>
<li class="chapter" data-level="12.5" data-path="experimental-design.html"><a href="experimental-design.html#determine-distribution"><i class="fa fa-check"></i><b>12.5</b> Determine distribution</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>13</b> Classification</a><ul>
<li class="chapter" data-level="13.1" data-path="classification.html"><a href="classification.html#fast-and-frugal-trees"><i class="fa fa-check"></i><b>13.1</b> Fast and frugal trees</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="other-stuff.html"><a href="other-stuff.html"><i class="fa fa-check"></i><b>14</b> Other stuff</a><ul>
<li class="chapter" data-level="14.1" data-path="other-stuff.html"><a href="other-stuff.html#maps---generate-and-locate-cities-in-a-world-map"><i class="fa fa-check"></i><b>14.1</b> Maps - Generate and locate cities in a world map</a></li>
<li class="chapter" data-level="14.2" data-path="other-stuff.html"><a href="other-stuff.html#extract-tables-from-the-internet"><i class="fa fa-check"></i><b>14.2</b> Extract tables from the internet</a></li>
<li class="chapter" data-level="14.3" data-path="other-stuff.html"><a href="other-stuff.html#extract-tables-from-the-internet-1"><i class="fa fa-check"></i><b>14.3</b> Extract tables from the internet</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="exercises-solutions.html"><a href="exercises-solutions.html"><i class="fa fa-check"></i><b>15</b> Exercises solutions</a><ul>
<li class="chapter" data-level="15.1" data-path="exercises-solutions.html"><a href="exercises-solutions.html#exercices-1"><i class="fa fa-check"></i><b>15.1</b> Exercices 1</a></li>
<li class="chapter" data-level="15.2" data-path="exercises-solutions.html"><a href="exercises-solutions.html#Ejercicios2"><i class="fa fa-check"></i><b>15.2</b> Ejercicios 2</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="exercises.html"><a href="exercises.html"><i class="fa fa-check"></i><b>16</b> Exercises</a><ul>
<li class="chapter" data-level="16.1" data-path="exercises.html"><a href="exercises.html#Ejercicios1"><i class="fa fa-check"></i><b>16.1</b> Ejercicios 1</a></li>
<li class="chapter" data-level="16.2" data-path="exercises-solutions.html"><a href="exercises-solutions.html#Ejercicios2"><i class="fa fa-check"></i><b>16.2</b> Ejercicios 2</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="bibliography-and-interesting-resources.html"><a href="bibliography-and-interesting-resources.html"><i class="fa fa-check"></i><b>17</b> Bibliography and interesting resources</a><ul>
<li class="chapter" data-level="17.1" data-path="bibliography-and-interesting-resources.html"><a href="bibliography-and-interesting-resources.html#bibliography"><i class="fa fa-check"></i><b>17.1</b> Bibliography</a></li>
<li class="chapter" data-level="17.2" data-path="bibliography-and-interesting-resources.html"><a href="bibliography-and-interesting-resources.html#interesting-resources---potentially"><i class="fa fa-check"></i><b>17.2</b> Interesting resources - potentially</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="todo-curso-basico-r-2016.html"><a href="todo-curso-basico-r-2016.html"><i class="fa fa-check"></i><b>18</b> TODO - Curso Basico R - 2016</a><ul>
<li class="chapter" data-level="18.1" data-path="todo-curso-basico-r-2016.html"><a href="todo-curso-basico-r-2016.html#en-ejercicios"><i class="fa fa-check"></i><b>18.1</b> EN EJERCICIOS:</a></li>
<li class="chapter" data-level="18.2" data-path="todo-curso-basico-r-2016.html"><a href="todo-curso-basico-r-2016.html#todo---limpieza-general"><i class="fa fa-check"></i><b>18.2</b> TODO - Limpieza general</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="todo-1.html"><a href="todo-1.html"><i class="fa fa-check"></i><b>19</b> TODO</a><ul>
<li class="chapter" data-level="19.1" data-path="todo-1.html"><a href="todo-1.html#urgent-stuff"><i class="fa fa-check"></i><b>19.1</b> Urgent stuff</a></li>
<li class="chapter" data-level="19.2" data-path="todo-1.html"><a href="todo-1.html#important"><i class="fa fa-check"></i><b>19.2</b> Important</a></li>
<li class="chapter" data-level="19.3" data-path="todo-1.html"><a href="todo-1.html#various"><i class="fa fa-check"></i><b>19.3</b> Various</a></li>
<li class="chapter" data-level="19.4" data-path="todo-1.html"><a href="todo-1.html#index-proposal"><i class="fa fa-check"></i><b>19.4</b> <strong>INDEX PROPOSAL</strong></a></li>
<li class="chapter" data-level="19.5" data-path="todo-1.html"><a href="todo-1.html#style-guide"><i class="fa fa-check"></i><b>19.5</b> Style guide</a><ul>
<li class="chapter" data-level="19.5.1" data-path="todo-1.html"><a href="todo-1.html#sections"><i class="fa fa-check"></i><b>19.5.1</b> Sections</a></li>
<li class="chapter" data-level="19.5.2" data-path="todo-1.html"><a href="todo-1.html#general"><i class="fa fa-check"></i><b>19.5.2</b> General</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="todo-1.html"><a href="todo-1.html#notas---remember"><i class="fa fa-check"></i><b>19.6</b> NOTAS - REMEMBER</a><ul>
<li class="chapter" data-level="19.6.1" data-path="todo-1.html"><a href="todo-1.html#refs"><i class="fa fa-check"></i><b>19.6.1</b> REFS</a></li>
<li class="chapter" data-level="19.6.2" data-path="todo-1.html"><a href="todo-1.html#notas"><i class="fa fa-check"></i><b>19.6.2</b> NOTAS</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R - Statistics Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="experimental-design" class="section level1">
<h1><span class="header-section-number">12</span> Experimental design</h1>
<div id="tamano-de-muestra-y-efecto-detectado" class="section level2">
<h2><span class="header-section-number">12.1</span> Tamaño de muestra y efecto detectado</h2>
<p>En esta simulación se muestra como con tamaños de muestra pequeños, se sobreestima el tamaño de efecto real. Como se puede ver en el codigo, solo se muestran los estudios simulados donde la correlacion es significativa. Ver el <a href="https://jimgrange.wordpress.com/2017/03/06/low-power-effect-sizes/">blog de Jim Grange</a> para una explicación más detallada.</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb347-1" data-line-number="1"><span class="co"># https://jimgrange.wordpress.com/2017/03/06/low-power-effect-sizes/</span></a>
<a class="sourceLine" id="cb347-2" data-line-number="2"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-3" data-line-number="3"><span class="kw">rm</span>(<span class="dt">list =</span> <span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb347-4" data-line-number="4"></a>
<a class="sourceLine" id="cb347-5" data-line-number="5"><span class="kw">set.seed</span>(<span class="dv">50</span>)</a>
<a class="sourceLine" id="cb347-6" data-line-number="6"></a>
<a class="sourceLine" id="cb347-7" data-line-number="7"><span class="co"># function for generating random draws from multivariate distribution</span></a>
<a class="sourceLine" id="cb347-8" data-line-number="8"><span class="co"># n = number of draws; p = number of variables</span></a>
<a class="sourceLine" id="cb347-9" data-line-number="9"><span class="co"># u = mean of each variable; s = SD of each variable</span></a>
<a class="sourceLine" id="cb347-10" data-line-number="10"><span class="co"># corMat = correlation matrix</span></a>
<a class="sourceLine" id="cb347-11" data-line-number="11">mvrnorm &lt;-<span class="st"> </span><span class="cf">function</span>(n, p, u, s, corMat) {</a>
<a class="sourceLine" id="cb347-12" data-line-number="12">  Z &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(n <span class="op">*</span><span class="st"> </span>p), p, n)</a>
<a class="sourceLine" id="cb347-13" data-line-number="13">  <span class="kw">t</span>(u <span class="op">+</span><span class="st"> </span>s <span class="op">*</span><span class="st"> </span><span class="kw">t</span>(<span class="kw">chol</span>(corMat)) <span class="op">%*%</span><span class="st"> </span>Z)</a>
<a class="sourceLine" id="cb347-14" data-line-number="14">}</a>
<a class="sourceLine" id="cb347-15" data-line-number="15"></a>
<a class="sourceLine" id="cb347-16" data-line-number="16"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-17" data-line-number="17"></a>
<a class="sourceLine" id="cb347-18" data-line-number="18"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-19" data-line-number="19">### simulation setup</a>
<a class="sourceLine" id="cb347-20" data-line-number="20"></a>
<a class="sourceLine" id="cb347-21" data-line-number="21"><span class="co"># declare simulation parameters</span></a>
<a class="sourceLine" id="cb347-22" data-line-number="22">means &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">100</span>, <span class="dv">600</span>)</a>
<a class="sourceLine" id="cb347-23" data-line-number="23">sds &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">20</span>, <span class="dv">80</span>)</a>
<a class="sourceLine" id="cb347-24" data-line-number="24">n_sims =<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb347-25" data-line-number="25"></a>
<a class="sourceLine" id="cb347-26" data-line-number="26"><span class="co"># declare correlation coefficient &amp; generate cor. matrix</span></a>
<a class="sourceLine" id="cb347-27" data-line-number="27">cor &lt;-<span class="st"> </span><span class="fl">0.3</span></a>
<a class="sourceLine" id="cb347-28" data-line-number="28">cor_mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">1</span>, cor, </a>
<a class="sourceLine" id="cb347-29" data-line-number="29">                    cor, <span class="dv">1</span>), <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">ncol =</span> <span class="dv">2</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb347-30" data-line-number="30"></a>
<a class="sourceLine" id="cb347-31" data-line-number="31"><span class="co"># sample sizes to simulate</span></a>
<a class="sourceLine" id="cb347-32" data-line-number="32">sample_sizes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">85</span>, <span class="dv">170</span>, <span class="dv">500</span>, <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb347-33" data-line-number="33"></a>
<a class="sourceLine" id="cb347-34" data-line-number="34"><span class="co"># number of simulations</span></a>
<a class="sourceLine" id="cb347-35" data-line-number="35"></a>
<a class="sourceLine" id="cb347-36" data-line-number="36"><span class="co"># create variable to store data in</span></a>
<a class="sourceLine" id="cb347-37" data-line-number="37">final_data &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dt">nrow =</span> n_sims, <span class="dt">ncol =</span> <span class="kw">length</span>(sample_sizes))</a>
<a class="sourceLine" id="cb347-38" data-line-number="38"><span class="kw">colnames</span>(final_data) &lt;-<span class="st"> </span>sample_sizes</a>
<a class="sourceLine" id="cb347-39" data-line-number="39"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-40" data-line-number="40"></a>
<a class="sourceLine" id="cb347-41" data-line-number="41"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-42" data-line-number="42">### simulation execution</a>
<a class="sourceLine" id="cb347-43" data-line-number="43"></a>
<a class="sourceLine" id="cb347-44" data-line-number="44"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(sample_sizes)){</a>
<a class="sourceLine" id="cb347-45" data-line-number="45">  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n_sims){</a>
<a class="sourceLine" id="cb347-46" data-line-number="46">    </a>
<a class="sourceLine" id="cb347-47" data-line-number="47">    <span class="co"># get the experiment data</span></a>
<a class="sourceLine" id="cb347-48" data-line-number="48">    sim_data &lt;-<span class="st"> </span><span class="kw">mvrnorm</span>(sample_sizes[i], <span class="dt">p =</span> <span class="dv">2</span>, <span class="dt">u =</span> means, <span class="dt">s =</span> sds, </a>
<a class="sourceLine" id="cb347-49" data-line-number="49">                        <span class="dt">corMat =</span> cor_mat)</a>
<a class="sourceLine" id="cb347-50" data-line-number="50">    </a>
<a class="sourceLine" id="cb347-51" data-line-number="51">    <span class="co"># perform the correlation</span></a>
<a class="sourceLine" id="cb347-52" data-line-number="52">    sim_cor &lt;-<span class="st"> </span><span class="kw">cor.test</span>(sim_data[, <span class="dv">1</span>], sim_data[, <span class="dv">2</span>], <span class="dt">method =</span> <span class="st">&quot;pearson&quot;</span>)</a>
<a class="sourceLine" id="cb347-53" data-line-number="53">    </a>
<a class="sourceLine" id="cb347-54" data-line-number="54">    <span class="co"># if the correlation is significant, store the effect size</span></a>
<a class="sourceLine" id="cb347-55" data-line-number="55">    <span class="cf">if</span>(sim_cor<span class="op">$</span>p.value <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.05</span>){</a>
<a class="sourceLine" id="cb347-56" data-line-number="56">      final_data[j, i] &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">round</span>(<span class="kw">abs</span>(sim_cor<span class="op">$</span>estimate), <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb347-57" data-line-number="57">    }</a>
<a class="sourceLine" id="cb347-58" data-line-number="58">  }</a>
<a class="sourceLine" id="cb347-59" data-line-number="59">}</a>
<a class="sourceLine" id="cb347-60" data-line-number="60"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-61" data-line-number="61"></a>
<a class="sourceLine" id="cb347-62" data-line-number="62"><span class="co">#------------------------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb347-63" data-line-number="63">## draw the plot</a>
<a class="sourceLine" id="cb347-64" data-line-number="64"><span class="kw">boxplot</span>(final_data, <span class="dt">na.action=</span>na.omit, <span class="dt">xlab =</span> <span class="st">&quot;Simulated Sample Size&quot;</span>, </a>
<a class="sourceLine" id="cb347-65" data-line-number="65">        <span class="dt">ylab =</span> <span class="st">&quot;Measured Effect Size&quot;</span>)</a>
<a class="sourceLine" id="cb347-66" data-line-number="66"><span class="kw">abline</span>(<span class="dt">h =</span> cor, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb347-67" data-line-number="67"></a>
<a class="sourceLine" id="cb347-68" data-line-number="68"><span class="kw">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="st">&quot;True Effect Size&quot;</span>, <span class="dt">cex =</span> <span class="fl">1.5</span>,  <span class="dt">lty =</span> <span class="dv">2</span>, <span class="dt">bty=</span><span class="st">&quot;n&quot;</span>, </a>
<a class="sourceLine" id="cb347-69" data-line-number="69">       <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/sample_size_calculation-1.png" width="672" /></p>
</div>
<div id="power-analysis" class="section level2">
<h2><span class="header-section-number">12.2</span> Power analysis</h2>
<p>Usamos el paquete <code>pwr</code>: <a href="https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html" class="uri">https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html</a>. En este tenemos un conjunto de funciones que nos permiten hacer power analysis para distintos tipos de diseños:</p>
<ul>
<li>pwr.p.test: one-sample proportion test</li>
<li>pwr.2p.test: two-sample proportion test</li>
<li>pwr.2p2n.test: two-sample proportion test (unequal sample sizes)</li>
<li>vpwr.t.test: two-sample, one-sample and paired t-tests</li>
<li>pwr.t2n.test: two-sample t-tests (unequal sample sizes)</li>
<li>pwr.anova.test: one-way balanced ANOVA</li>
<li>pwr.r.test: correlation test</li>
<li>pwr.chisq.test: chi-squared test (goodness of fit and association)</li>
<li>pwr.f2.test: test for the general linear model</li>
</ul>
<p>En cada uno de ellos podemos modificar varios parámetros. El parámetro que dejemos sin especificar será el que se calculará:</p>
<ul>
<li>k = groups<br />
</li>
<li>n = participants (in each group)<br />
</li>
<li>f = effect size<br />
</li>
<li>sig.level = sig level<br />
</li>
<li>power = power<br />
</li>
<li>etc.</li>
</ul>
<p>Conventional effect sizes for all tests in the pwr package (SOURCE: <a href="https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html" class="uri">https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html</a>):</p>
<table>
<thead>
<tr class="header">
<th>Test</th>
<th>small</th>
<th>medium</th>
<th>large</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tests for proportions (p)</td>
<td>0.2</td>
<td>0.5</td>
<td>0.8</td>
</tr>
<tr class="even">
<td>tests for means (t)</td>
<td>0.2</td>
<td>0.5</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td>chi-square tests (chisq)</td>
<td>0.1</td>
<td>0.3</td>
<td>0.5</td>
</tr>
<tr class="even">
<td>correlation test (r)</td>
<td>0.1</td>
<td>0.3</td>
<td>0.5</td>
</tr>
<tr class="odd">
<td>anova (anov)</td>
<td>0.1</td>
<td>0.25</td>
<td>0.4</td>
</tr>
<tr class="even">
<td>general linear model (f2)</td>
<td>0.02</td>
<td>0.15</td>
<td>0.35</td>
</tr>
</tbody>
</table>
<p><strong>Libraries</strong></p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb348-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&#39;pacman&#39;</span>)) <span class="kw">install.packages</span>(<span class="st">&#39;pacman&#39;</span>); <span class="kw">library</span>(<span class="st">&#39;pacman&#39;</span>)</a>
<a class="sourceLine" id="cb348-2" data-line-number="2"><span class="kw">p_load</span>(pwr)</a></code></pre></div>
<p><strong>Code</strong></p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb349-1" data-line-number="1"><span class="co">#T-test</span></a>
<a class="sourceLine" id="cb349-2" data-line-number="2"><span class="kw">pwr.t.test</span>(<span class="dt">n =</span> , <span class="dt">d =</span> <span class="fl">0.8</span>, <span class="dt">sig.level =</span> <span class="fl">0.05</span>, <span class="dt">power =</span> <span class="fl">0.95</span>, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">&quot;two.sample&quot;</span>))</a></code></pre></div>
<pre><code>## 
##      Two-sample t test power calculation 
## 
##               n = 41.59413
##               d = 0.8
##       sig.level = 0.05
##           power = 0.95
##     alternative = two.sided
## 
## NOTE: n is number in *each* group</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb351-1" data-line-number="1"><span class="co">#T-test </span></a>
<a class="sourceLine" id="cb351-2" data-line-number="2"><span class="kw">pwr.t2n.test</span>(<span class="dt">n1 =</span> <span class="dv">150</span>, <span class="dt">n2 =</span> <span class="dv">75</span>, <span class="dt">d =</span> , <span class="dt">sig.level =</span> <span class="fl">0.05</span>, <span class="dt">power =</span> <span class="fl">0.8</span>)</a></code></pre></div>
<pre><code>## 
##      t test power calculation 
## 
##              n1 = 150
##              n2 = 75
##               d = 0.3979226
##       sig.level = 0.05
##           power = 0.8
##     alternative = two.sided</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb353-1" data-line-number="1"><span class="co">#Anova </span></a>
<a class="sourceLine" id="cb353-2" data-line-number="2"><span class="kw">pwr.anova.test</span>(<span class="dt">k =</span> <span class="dv">3</span>, <span class="dt">n =</span> , <span class="dt">f =</span> <span class="fl">.25</span>, <span class="dt">sig.level =</span> <span class="fl">0.05</span>, <span class="dt">power =</span> <span class="fl">.8</span>)</a></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 3
##               n = 52.3966
##               f = 0.25
##       sig.level = 0.05
##           power = 0.8
## 
## NOTE: n is number in each group</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb355-1" data-line-number="1"><span class="co">#Effect size that we can detect</span></a>
<a class="sourceLine" id="cb355-2" data-line-number="2"><span class="kw">pwr.anova.test</span>(<span class="dt">k =</span> <span class="dv">6</span>, <span class="dt">n =</span> <span class="dv">42</span>, <span class="dt">sig.level =</span> <span class="fl">0.05</span>, <span class="dt">power =</span> <span class="fl">.95</span>)</a></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 6
##               n = 42
##               f = 0.283334
##       sig.level = 0.05
##           power = 0.95
## 
## NOTE: n is number in each group</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb357-1" data-line-number="1"><span class="co">#Sample size needed to detect an effect of f=0.5</span></a>
<a class="sourceLine" id="cb357-2" data-line-number="2"><span class="kw">pwr.anova.test</span>(<span class="dt">k =</span> <span class="dv">2</span>, <span class="dt">f =</span> <span class="fl">0.5</span>, <span class="dt">sig.level =</span> <span class="fl">0.05</span>, <span class="dt">power =</span> <span class="fl">.95</span>)</a></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 2
##               n = 26.9892
##               f = 0.5
##       sig.level = 0.05
##           power = 0.95
## 
## NOTE: n is number in each group</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb359-1" data-line-number="1"><span class="co"># General linear model</span></a>
<a class="sourceLine" id="cb359-2" data-line-number="2">  <span class="co"># See example in https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html</span></a>
<a class="sourceLine" id="cb359-3" data-line-number="3">  <span class="kw">pwr.f2.test</span>(<span class="dt">u =</span> <span class="dv">2</span>, <span class="dt">f2 =</span> <span class="fl">0.3</span><span class="op">/</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="fl">0.3</span>), <span class="dt">sig.level =</span> <span class="fl">0.001</span>, <span class="dt">power =</span> <span class="fl">0.8</span>)</a></code></pre></div>
<pre><code>## 
##      Multiple regression power calculation 
## 
##               u = 2
##               v = 49.88971
##              f2 = 0.4285714
##       sig.level = 0.001
##           power = 0.8</code></pre>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb361-1" data-line-number="1">  <span class="co">#  n=v+u+1. Therefore he needs 50 + 2 + 1 = 53 student records.</span></a></code></pre></div>
<div id="longitudinal-designs" class="section level3">
<h3><span class="header-section-number">12.2.1</span> Longitudinal designs</h3>
<p>Calculate sample size for longitudinal designs</p>
<p><strong>Libraries</strong></p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb362-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&#39;pacman&#39;</span>)) <span class="kw">install.packages</span>(<span class="st">&#39;pacman&#39;</span>); <span class="kw">library</span>(<span class="st">&#39;pacman&#39;</span>)</a>
<a class="sourceLine" id="cb362-2" data-line-number="2"><span class="kw">p_load</span>(powerMediation)</a></code></pre></div>
<p><strong>Code</strong></p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb363-1" data-line-number="1"><span class="kw">ssLong</span>(<span class="dt">es =</span> <span class="fl">0.5</span>, <span class="co">#  effect size of the difference of mean change.</span></a>
<a class="sourceLine" id="cb363-2" data-line-number="2">       <span class="dt">rho =</span> <span class="fl">0.5</span>, <span class="co"># correlation coefficient between baseline and follow-up values within a treatment group.</span></a>
<a class="sourceLine" id="cb363-3" data-line-number="3">       <span class="dt">alpha =</span> <span class="fl">0.05</span>, </a>
<a class="sourceLine" id="cb363-4" data-line-number="4">       <span class="dt">power =</span> <span class="fl">0.95</span>)</a></code></pre></div>
<pre><code>## [1] 104</code></pre>

</div>
</div>
<div id="anonimizar-participantes---encriptar-ids" class="section level2">
<h2><span class="header-section-number">12.3</span> Anonimizar participantes - Encriptar IDs</h2>
<p><strong>Libraries</strong></p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb365-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&#39;pacman&#39;</span>)) <span class="kw">install.packages</span>(<span class="st">&#39;pacman&#39;</span>); <span class="kw">library</span>(<span class="st">&#39;pacman&#39;</span>)</a>
<a class="sourceLine" id="cb365-2" data-line-number="2"><span class="kw">p_load</span>(hashids, tidyverse)</a></code></pre></div>
<div id="encriptando-y-desencriptando-un-elemento" class="section level3">
<h3><span class="header-section-number">12.3.1</span> Encriptando y desencriptando un elemento</h3>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb366-1" data-line-number="1">h =<span class="st"> </span><span class="kw">hashid_settings</span>(<span class="dt">salt =</span> <span class="st">&#39;this is my salt&#39;</span>)</a>
<a class="sourceLine" id="cb366-2" data-line-number="2"></a>
<a class="sourceLine" id="cb366-3" data-line-number="3"><span class="co"># Numbers to encode</span></a>
<a class="sourceLine" id="cb366-4" data-line-number="4">Plain_ID =<span class="st"> </span><span class="kw">c</span>(<span class="dv">12345678</span>); Plain_ID</a></code></pre></div>
<pre><code>## [1] 12345678</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb368-1" data-line-number="1">a =<span class="st"> </span><span class="kw">encode</span>(Plain_ID, h); a <span class="co">#&quot;BZ9RNV&quot;</span></a></code></pre></div>
<pre><code>## [1] &quot;BZ9RNV&quot;</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb370-1" data-line-number="1"><span class="kw">decode</span>(<span class="st">&quot;BZ9RNV&quot;</span>, h) <span class="co">#12345678</span></a></code></pre></div>
<pre><code>## [1] 12345678</code></pre>
</div>
<div id="encriptando-y-desencriptando-la-columna-rut-de-una-db-completa." class="section level3">
<h3><span class="header-section-number">12.3.2</span> Encriptando y desencriptando la columna RUT de una DB completa.</h3>
<p>Generamos aleatoriamente numeros de identificacion “similares” a RUTs, los encriptamos, y despues desencriptamos.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb372-1" data-line-number="1"><span class="co"># Cargamos librerias y leemos DB</span></a>
<a class="sourceLine" id="cb372-2" data-line-number="2"><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">&#39;pacman&#39;</span>)) <span class="kw">install.packages</span>(<span class="st">&#39;pacman&#39;</span>); <span class="kw">library</span>(<span class="st">&#39;pacman&#39;</span>)</a>
<a class="sourceLine" id="cb372-3" data-line-number="3"><span class="kw">p_load</span>(hashids, tidyverse)</a>
<a class="sourceLine" id="cb372-4" data-line-number="4"></a>
<a class="sourceLine" id="cb372-5" data-line-number="5"><span class="co"># Pseudo RUTs generadas aleatoriamente</span></a>
<a class="sourceLine" id="cb372-6" data-line-number="6">data =<span class="st"> </span><span class="kw">round</span>(<span class="kw">runif</span>(<span class="dv">100</span>)<span class="op">*</span><span class="dv">10000000</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as_tibble</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb372-7" data-line-number="7"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rename</span>(<span class="dt">RUT =</span> value)</a></code></pre></div>
<p><strong>BUG: When building book with Bookdown, it ignores the rowwise() argument!?</strong></p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb373-1" data-line-number="1">h =<span class="st"> </span><span class="kw">hashid_settings</span>(<span class="dt">salt =</span> <span class="st">&#39;this is my salt&#39;</span>)</a>
<a class="sourceLine" id="cb373-2" data-line-number="2"></a>
<a class="sourceLine" id="cb373-3" data-line-number="3"><span class="co"># Encriptamos</span></a>
<a class="sourceLine" id="cb373-4" data-line-number="4">data =<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb373-5" data-line-number="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb373-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RUT_Encripted =</span> <span class="kw">encode</span>(RUT, h))</a>
<a class="sourceLine" id="cb373-7" data-line-number="7"></a>
<a class="sourceLine" id="cb373-8" data-line-number="8"><span class="co"># Desencriptamos</span></a>
<a class="sourceLine" id="cb373-9" data-line-number="9">data =<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb373-10" data-line-number="10"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw">rowwise</span>() <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb373-11" data-line-number="11"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">RUT_Decripted =</span> <span class="kw">decode</span>(RUT_Encripted, h))</a></code></pre></div>
<pre><code>## Warning in if (hash_str == &quot;&quot;) stop(&quot;decode: invalid hashid&quot;): the
## condition has length &gt; 1 and only the first element will be used</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb375-1" data-line-number="1"><span class="co"># Mostramos los resultados</span></a>
<a class="sourceLine" id="cb375-2" data-line-number="2">data <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(RUT_Encripted, RUT_Decripted, RUT)</a></code></pre></div>
<pre><code>## Source: local data frame [100 x 3]
## Groups: &lt;by row&gt;
## 
## # A tibble: 100 x 3
##    RUT_Encripted                                      RUT_Decripted    RUT
##  * &lt;chr&gt;                                                      &lt;dbl&gt;  &lt;dbl&gt;
##  1 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       2832261 2.83e6
##  2 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       7583306 7.58e6
##  3 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       3955537 3.96e6
##  4 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       8587857 8.59e6
##  5 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       2879598 2.88e6
##  6 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       9179372 9.18e6
##  7 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       5208890 5.21e6
##  8 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       1422724 1.42e6
##  9 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       5975451 5.98e6
## 10 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7…       9688978 9.69e6
## # ... with 90 more rows</code></pre>

</div>
</div>
<div id="match-participants" class="section level2">
<h2><span class="header-section-number">12.4</span> Match participants</h2>
<hr />
<p>Usaremos la siguiente <a href="Data/11-Experimental_design/Match_participants.csv">Base de datos</a></p>
<hr />
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb377-1" data-line-number="1"><span class="co"># Cargamos librerias y leemos DBif (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;)</span></a>
<a class="sourceLine" id="cb377-2" data-line-number="2"><span class="kw">p_load</span>(optmatch, tidyverse)</a>
<a class="sourceLine" id="cb377-3" data-line-number="3"></a>
<a class="sourceLine" id="cb377-4" data-line-number="4"><span class="co"># Archivo de data crudos</span></a>
<a class="sourceLine" id="cb377-5" data-line-number="5"><span class="co"># RUTs y Edades generadas aleatoriamente</span></a>
<a class="sourceLine" id="cb377-6" data-line-number="6">data =<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;Data/11-Experimental_design/Match_participants.csv&quot;</span>)</a>
<a class="sourceLine" id="cb377-7" data-line-number="7"></a>
<a class="sourceLine" id="cb377-8" data-line-number="8"><span class="kw">head</span>(data)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##      ID    RUT Sexo    Edad Ocupacion           Educacion Porcentaje_ahor…
##   &lt;int&gt;  &lt;int&gt; &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;               &lt;chr&gt;                &lt;dbl&gt;
## 1     1 588006 Mujer     29 ASISTENTE DE TESOR… Técnica                 10
## 2     2 188576 Mujer     21 Ingeniero Comercial Maestría                50
## 3     3 206609 Hombre    46 trabajador          Técnica                  5
## 4     4 404898 Mujer     52 Psicóloga           Maestría                 0
## 5     5 533281 Mujer     63 Controller Postgra… Maestría                 4
## 6     6  60824 Hombre    29 Ingeniro Comercial  Maestría                 8</code></pre>
<p>Preparamos la base de datos</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb379-1" data-line-number="1"><span class="co"># Umbrales para ahorradores y no ahorradores</span></a>
<a class="sourceLine" id="cb379-2" data-line-number="2">Criterio_ahorradores =<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb379-3" data-line-number="3">Criterio_no_ahorradores =<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb379-4" data-line-number="4"></a>
<a class="sourceLine" id="cb379-5" data-line-number="5"><span class="co"># Mostramos histograma</span></a>
<a class="sourceLine" id="cb379-6" data-line-number="6"><span class="kw">hist</span>(data<span class="op">$</span>Porcentaje_ahorro, <span class="dt">breaks =</span> <span class="dv">100</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/match_participants_data_preparation-1.png" width="672" /></p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb380-1" data-line-number="1"><span class="co"># Creamos grupos de Ahorradores (0) y No ahorradores (1)</span></a>
<a class="sourceLine" id="cb380-2" data-line-number="2">data<span class="op">$</span>Ahorro =<span class="st"> </span><span class="kw">ifelse</span>(data<span class="op">$</span>Porcentaje_ahorro <span class="op">&lt;=</span><span class="st"> </span>Criterio_no_ahorradores, <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb380-3" data-line-number="3">                      <span class="kw">ifelse</span>(data<span class="op">$</span>Porcentaje_ahorro <span class="op">&gt;=</span><span class="st"> </span>Criterio_ahorradores, <span class="dv">0</span>, <span class="ot">NA</span></a>
<a class="sourceLine" id="cb380-4" data-line-number="4">                      ))</a>
<a class="sourceLine" id="cb380-5" data-line-number="5"></a>
<a class="sourceLine" id="cb380-6" data-line-number="6"><span class="co"># Cuantos tenemos en cada grupo?</span></a>
<a class="sourceLine" id="cb380-7" data-line-number="7"><span class="kw">table</span>(data<span class="op">$</span>Ahorro)</a></code></pre></div>
<pre><code>## 
##   0   1 
## 113  66</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb382-1" data-line-number="1"><span class="co">#Limpiamos NAs en Ahorro y RUTs duplicados</span></a>
<a class="sourceLine" id="cb382-2" data-line-number="2">data =<span class="st"> </span>data[<span class="kw">complete.cases</span>(data),]</a>
<a class="sourceLine" id="cb382-3" data-line-number="3">data =<span class="st"> </span>data[<span class="op">!</span><span class="kw">duplicated</span>(data<span class="op">$</span>ID),]</a>
<a class="sourceLine" id="cb382-4" data-line-number="4"></a>
<a class="sourceLine" id="cb382-5" data-line-number="5"><span class="co">#Eliminamos a los Estudiantes</span></a>
<a class="sourceLine" id="cb382-6" data-line-number="6">data =<span class="st"> </span>data[<span class="op">!</span><span class="kw">grepl</span>(<span class="st">&quot;studiante&quot;</span>, data<span class="op">$</span>Ocupacion),]</a>
<a class="sourceLine" id="cb382-7" data-line-number="7"></a>
<a class="sourceLine" id="cb382-8" data-line-number="8"><span class="co">#Recreamos columna ID para los registros que quedan</span></a>
<a class="sourceLine" id="cb382-9" data-line-number="9">data<span class="op">$</span>ID =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data))</a></code></pre></div>
<p>Realizamos el matching</p>
<p><strong>TODO: Como evaluamos si el matching es bueno?</strong></p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb383-1" data-line-number="1"><span class="co">#Creamos base de parejas</span></a>
<a class="sourceLine" id="cb383-2" data-line-number="2">parejas =<span class="st"> </span><span class="kw">as.data.frame</span>((optmatch<span class="op">::</span><span class="kw">pairmatch</span>(Ahorro <span class="op">~</span><span class="st"> </span>Edad <span class="op">+</span><span class="st"> </span>Sexo <span class="op">+</span><span class="st"> </span>Educacion, <span class="dt">data =</span> data)))</a>
<a class="sourceLine" id="cb383-3" data-line-number="3">    <span class="co"># caliper establece limites para los matchings</span></a>
<a class="sourceLine" id="cb383-4" data-line-number="4">    <span class="co"># print(pairmatch(Ahorro ~ Edad + Sexo + Educacion, caliper = 4.9, data = data), grouped = TRUE)</span></a>
<a class="sourceLine" id="cb383-5" data-line-number="5"></a>
<a class="sourceLine" id="cb383-6" data-line-number="6"><span class="co">#Como evaluamos si es buena la seleccion?</span></a>
<a class="sourceLine" id="cb383-7" data-line-number="7"><span class="co"># summary(lm(Ahorro ~ Edad + Sexo + Educacion, data = data))</span></a>
<a class="sourceLine" id="cb383-8" data-line-number="8"></a>
<a class="sourceLine" id="cb383-9" data-line-number="9"><span class="co">#Añadimos columna ID y renombramos columnas</span></a>
<a class="sourceLine" id="cb383-10" data-line-number="10">parejas<span class="op">$</span>ID =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(data))</a>
<a class="sourceLine" id="cb383-11" data-line-number="11"><span class="kw">colnames</span>(parejas) =<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Group&quot;</span>, <span class="st">&quot;ID&quot;</span>)</a>
<a class="sourceLine" id="cb383-12" data-line-number="12"></a>
<a class="sourceLine" id="cb383-13" data-line-number="13"><span class="co">#Combinamos ambas bases y limpiamos</span></a>
<a class="sourceLine" id="cb383-14" data-line-number="14">datos_combinados =<span class="st"> </span><span class="kw">merge</span>(data, parejas, <span class="dt">by =</span> <span class="st">&quot;ID&quot;</span>)</a>
<a class="sourceLine" id="cb383-15" data-line-number="15">datos_combinados =<span class="st"> </span>datos_combinados[<span class="kw">complete.cases</span>(datos_combinados),]</a>
<a class="sourceLine" id="cb383-16" data-line-number="16"></a>
<a class="sourceLine" id="cb383-17" data-line-number="17"><span class="co">#Ordenamos por Num de grupo y Ahorro</span></a>
<a class="sourceLine" id="cb383-18" data-line-number="18">datos_finales =<span class="st"> </span>datos_combinados <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Group, Ahorro)</a></code></pre></div>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb384-1" data-line-number="1"><span class="co">#Cuantos en cada grupo?</span></a>
<a class="sourceLine" id="cb384-2" data-line-number="2"><span class="kw">table</span>(datos_finales<span class="op">$</span>Ahorro)</a></code></pre></div>
<pre><code>## 
##  0  1 
## 58 58</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb386-1" data-line-number="1"><span class="co"># datos_finales %&gt;% dplyr::select(Edad, Sexo, Educacion, Porcentaje_ahorro)</span></a></code></pre></div>

</div>
<div id="determine-distribution" class="section level2">
<h2><span class="header-section-number">12.5</span> Determine distribution</h2>
<p>FROM: <a href="https://stats.stackexchange.com/questions/132652/how-to-determine-which-distribution-fits-my-data-best" class="uri">https://stats.stackexchange.com/questions/132652/how-to-determine-which-distribution-fits-my-data-best</a></p>
<p>Which ditribution best fits our data.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(<span class="st">&#39;pacman&#39;</span>)) <span class="kw">install.packages</span>(<span class="st">&#39;pacman&#39;</span>); <span class="kw">library</span>(<span class="st">&#39;pacman&#39;</span>)</a>
<a class="sourceLine" id="cb387-2" data-line-number="2"><span class="kw">p_load</span>(fitdistrplus, logspline)</a></code></pre></div>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb388-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">37.50</span>,<span class="fl">46.79</span>,<span class="fl">48.30</span>,<span class="fl">46.04</span>,<span class="fl">43.40</span>,<span class="fl">39.25</span>,<span class="fl">38.49</span>,<span class="fl">49.51</span>,<span class="fl">40.38</span>,<span class="fl">36.98</span>,<span class="fl">40.00</span>,</a>
<a class="sourceLine" id="cb388-2" data-line-number="2">       <span class="fl">38.49</span>,<span class="fl">37.74</span>,<span class="fl">47.92</span>,<span class="fl">44.53</span>,<span class="fl">44.91</span>,<span class="fl">44.91</span>,<span class="fl">40.00</span>,<span class="fl">41.51</span>,<span class="fl">47.92</span>,<span class="fl">36.98</span>,<span class="fl">43.40</span>,</a>
<a class="sourceLine" id="cb388-3" data-line-number="3">       <span class="fl">42.26</span>,<span class="fl">41.89</span>,<span class="fl">38.87</span>,<span class="fl">43.02</span>,<span class="fl">39.25</span>,<span class="fl">40.38</span>,<span class="fl">42.64</span>,<span class="fl">36.98</span>,<span class="fl">44.15</span>,<span class="fl">44.91</span>,<span class="fl">43.40</span>,</a>
<a class="sourceLine" id="cb388-4" data-line-number="4">       <span class="fl">49.81</span>,<span class="fl">38.87</span>,<span class="fl">40.00</span>,<span class="fl">52.45</span>,<span class="fl">53.13</span>,<span class="fl">47.92</span>,<span class="fl">52.45</span>,<span class="fl">44.91</span>,<span class="fl">29.54</span>,<span class="fl">27.13</span>,<span class="fl">35.60</span>,</a>
<a class="sourceLine" id="cb388-5" data-line-number="5">       <span class="fl">45.34</span>,<span class="fl">43.37</span>,<span class="fl">54.15</span>,<span class="fl">42.77</span>,<span class="fl">42.88</span>,<span class="fl">44.26</span>,<span class="fl">27.14</span>,<span class="fl">39.31</span>,<span class="fl">24.80</span>,<span class="fl">16.62</span>,<span class="fl">30.30</span>,</a>
<a class="sourceLine" id="cb388-6" data-line-number="6">       <span class="fl">36.39</span>,<span class="fl">28.60</span>,<span class="fl">28.53</span>,<span class="fl">35.84</span>,<span class="fl">31.10</span>,<span class="fl">34.55</span>,<span class="fl">52.65</span>,<span class="fl">48.81</span>,<span class="fl">43.42</span>,<span class="fl">52.49</span>,<span class="fl">38.00</span>,</a>
<a class="sourceLine" id="cb388-7" data-line-number="7">       <span class="fl">38.65</span>,<span class="fl">34.54</span>,<span class="fl">37.70</span>,<span class="fl">38.11</span>,<span class="fl">43.05</span>,<span class="fl">29.95</span>,<span class="fl">32.48</span>,<span class="fl">24.63</span>,<span class="fl">35.33</span>,<span class="fl">41.34</span>)</a>
<a class="sourceLine" id="cb388-8" data-line-number="8"><span class="kw">descdist</span>(x, <span class="dt">discrete =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-65-1.png" width="672" /></p>
<pre><code>## summary statistics
## ------
## min:  16.62   max:  54.15 
## median:  40.38 
## mean:  40.28434 
## estimated sd:  7.420034 
## estimated skewness:  -0.551717 
## estimated kurtosis:  3.565162</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pre-processing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="classification.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
