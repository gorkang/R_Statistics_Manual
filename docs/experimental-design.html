<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>13 Experimental design | R - Statistics Manual</title>
  <meta name="description" content="Statistics manual from CSCN." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="13 Experimental design | R - Statistics Manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Statistics manual from CSCN." />
  <meta name="github-repo" content="gorkang/R_Statistics_Manual" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="13 Experimental design | R - Statistics Manual" />
  
  <meta name="twitter:description" content="Statistics manual from CSCN." />
  

<meta name="author" content="Center for Social and Cognitive Neuroscience - cscn.uai.cl" />


<meta name="date" content="2021-03-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="pre-processing.html"/>
<link rel="next" href="classification.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<script src="libs/datatables-binding-0.2.10/datatables.js"></script>
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#for-users"><i class="fa fa-check"></i><b>1.1</b> For USERS</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#for-developers-and-statisticians"><i class="fa fa-check"></i><b>1.2</b> For Developers and Statisticians</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#contributors"><i class="fa fa-check"></i><b>1.3</b> Contributors</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#todo"><i class="fa fa-check"></i><b>1.4</b> TODO</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#inferential-analysis"><i class="fa fa-check"></i><b>1.4.1</b> Inferential analysis</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Empezando.html"><a href="Empezando.html"><i class="fa fa-check"></i><b>2</b> Empezando en A-B-C</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Empezando.html"><a href="Empezando.html#a-instalar-r."><i class="fa fa-check"></i><b>2.1</b> <strong>(A)</strong> Instalar R.</a></li>
<li class="chapter" data-level="2.2" data-path="Empezando.html"><a href="Empezando.html#b-instalar-rstudio."><i class="fa fa-check"></i><b>2.2</b> <strong>(B)</strong> Instalar RStudio.</a></li>
<li class="chapter" data-level="2.3" data-path="Empezando.html"><a href="Empezando.html#instalar-packages"><i class="fa fa-check"></i><b>2.3</b> Instalar Packages</a></li>
<li class="chapter" data-level="2.4" data-path="Empezando.html"><a href="Empezando.html#cargar-packages"><i class="fa fa-check"></i><b>2.4</b> Cargar Packages</a></li>
<li class="chapter" data-level="2.5" data-path="Empezando.html"><a href="Empezando.html#todo-en-uno"><i class="fa fa-check"></i><b>2.5</b> Todo en uno</a></li>
<li class="chapter" data-level="2.6" data-path="Empezando.html"><a href="Empezando.html#c-librerias-para-el-workshop"><i class="fa fa-check"></i><b>2.6</b> <strong>(C)</strong> Librerias para el workshop</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html"><i class="fa fa-check"></i><b>3</b> Mi primer script</a>
<ul>
<li class="chapter" data-level="3.1" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html#paso-a-paso"><i class="fa fa-check"></i><b>3.1</b> Paso a paso</a></li>
<li class="chapter" data-level="3.2" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html#establecer-nuestro-directorio-de-trabajo"><i class="fa fa-check"></i><b>3.2</b> Establecer nuestro directorio de trabajo</a></li>
<li class="chapter" data-level="3.3" data-path="Mi-primer-script.html"><a href="Mi-primer-script.html#nuestro-primer-script"><i class="fa fa-check"></i><b>3.3</b> Nuestro primer script</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html"><i class="fa fa-check"></i><b>4</b> Conseguir ayuda y aprender más</a>
<ul>
<li class="chapter" data-level="4.1" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#cuando-sabemos-que-función-usar-pero-dudamos-de-la-sintaxis"><i class="fa fa-check"></i><b>4.1</b> Cuando sabemos que función usar, pero dudamos de la sintaxis:</a></li>
<li class="chapter" data-level="4.2" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#cuando-sabemos-lo-que-queremos-hacer-pero-no-la-función-que-debemos-usar"><i class="fa fa-check"></i><b>4.2</b> Cuando sabemos lo que queremos hacer pero no la función que debemos usar:</a></li>
<li class="chapter" data-level="4.3" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#libros-y-web-recomendados"><i class="fa fa-check"></i><b>4.3</b> Libros y Web recomendados</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#hadley-wickhams-books"><i class="fa fa-check"></i><b>4.3.1</b> Hadley Wickham’s books</a></li>
<li class="chapter" data-level="4.3.2" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#learning-statistics-with-r"><i class="fa fa-check"></i><b>4.3.2</b> Learning statistics with R</a></li>
<li class="chapter" data-level="4.3.3" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#pirate-guide-to-r"><i class="fa fa-check"></i><b>4.3.3</b> Pirate guide to R</a></li>
<li class="chapter" data-level="4.3.4" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#plots"><i class="fa fa-check"></i><b>4.3.4</b> Plots</a></li>
<li class="chapter" data-level="4.3.5" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#other-references"><i class="fa fa-check"></i><b>4.3.5</b> Other references</a></li>
<li class="chapter" data-level="4.3.6" data-path="Conseguir-ayuda.html"><a href="Conseguir-ayuda.html#twitter"><i class="fa fa-check"></i><b>4.3.6</b> Twitter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html"><i class="fa fa-check"></i><b>5</b> Basics - Data types, import and export data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#data-types"><i class="fa fa-check"></i><b>5.1</b> Data types</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#data-frames"><i class="fa fa-check"></i><b>5.1.1</b> Data Frames</a></li>
<li class="chapter" data-level="5.1.2" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#matrices"><i class="fa fa-check"></i><b>5.1.2</b> Matrices</a></li>
<li class="chapter" data-level="5.1.3" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#listas"><i class="fa fa-check"></i><b>5.1.3</b> Listas</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#import-data"><i class="fa fa-check"></i><b>5.2</b> Import data</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#from-csv-file"><i class="fa fa-check"></i><b>5.2.1</b> From CSV file</a></li>
<li class="chapter" data-level="5.2.2" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#from-xls-file-excel"><i class="fa fa-check"></i><b>5.2.2</b> From XLS’ file (Excel)</a></li>
<li class="chapter" data-level="5.2.3" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#from-sav-file-spss"><i class="fa fa-check"></i><b>5.2.3</b> From SAV file (SPSS)</a></li>
<li class="chapter" data-level="5.2.4" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#import-all-files-from-a-folder"><i class="fa fa-check"></i><b>5.2.4</b> Import all files from a folder</a></li>
<li class="chapter" data-level="5.2.5" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#import-files-using-rstudio"><i class="fa fa-check"></i><b>5.2.5</b> Import files using RStudio</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#export-data"><i class="fa fa-check"></i><b>5.3</b> Export data</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="basics-data-types-import-and-export-data.html"><a href="basics-data-types-import-and-export-data.html#export-data-to-csv-file"><i class="fa fa-check"></i><b>5.3.1</b> Export data to CSV file</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="Manipular-datos.html"><a href="Manipular-datos.html"><i class="fa fa-check"></i><b>6</b> Manipular datos</a>
<ul>
<li class="chapter" data-level="6.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#leer-y-guardar-datos"><i class="fa fa-check"></i><b>6.1</b> Leer y guardar datos</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#leer-datos"><i class="fa fa-check"></i><b>6.1.1</b> Leer datos</a></li>
<li class="chapter" data-level="6.1.2" data-path="Manipular-datos.html"><a href="Manipular-datos.html#guardar-db-a-archivo"><i class="fa fa-check"></i><b>6.1.2</b> Guardar DB a archivo</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="Manipular-datos.html"><a href="Manipular-datos.html#ver-output-vs-asignar-output"><i class="fa fa-check"></i><b>6.2</b> Ver output vs asignar output</a></li>
<li class="chapter" data-level="6.3" data-path="Manipular-datos.html"><a href="Manipular-datos.html#verbos-de-dplyr"><i class="fa fa-check"></i><b>6.3</b> Verbos de dplyr</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#filtrar-datos"><i class="fa fa-check"></i><b>6.3.1</b> Filtrar datos</a></li>
<li class="chapter" data-level="6.3.2" data-path="Manipular-datos.html"><a href="Manipular-datos.html#ordenar-db"><i class="fa fa-check"></i><b>6.3.2</b> Ordenar DB</a></li>
<li class="chapter" data-level="6.3.3" data-path="Manipular-datos.html"><a href="Manipular-datos.html#seleccionar-variables"><i class="fa fa-check"></i><b>6.3.3</b> Seleccionar variables</a></li>
<li class="chapter" data-level="6.3.4" data-path="Manipular-datos.html"><a href="Manipular-datos.html#renombrar-variables"><i class="fa fa-check"></i><b>6.3.4</b> Renombrar variables</a></li>
<li class="chapter" data-level="6.3.5" data-path="Manipular-datos.html"><a href="Manipular-datos.html#separate-contents-of-a-single-variable"><i class="fa fa-check"></i><b>6.3.5</b> Separate contents of a single variable</a></li>
<li class="chapter" data-level="6.3.6" data-path="Manipular-datos.html"><a href="Manipular-datos.html#wide-to-long-format"><i class="fa fa-check"></i><b>6.3.6</b> Wide to Long format</a></li>
<li class="chapter" data-level="6.3.7" data-path="Manipular-datos.html"><a href="Manipular-datos.html#long-to-wide"><i class="fa fa-check"></i><b>6.3.7</b> Long to wide</a></li>
<li class="chapter" data-level="6.3.8" data-path="Manipular-datos.html"><a href="Manipular-datos.html#omitir-nas"><i class="fa fa-check"></i><b>6.3.8</b> Omitir NAs</a></li>
<li class="chapter" data-level="6.3.9" data-path="Manipular-datos.html"><a href="Manipular-datos.html#eliminar-variables"><i class="fa fa-check"></i><b>6.3.9</b> Eliminar variables</a></li>
<li class="chapter" data-level="6.3.10" data-path="Manipular-datos.html"><a href="Manipular-datos.html#crear-nuevas-variables"><i class="fa fa-check"></i><b>6.3.10</b> Crear nuevas variables:</a></li>
<li class="chapter" data-level="6.3.11" data-path="Manipular-datos.html"><a href="Manipular-datos.html#recodificamos-datos"><i class="fa fa-check"></i><b>6.3.11</b> Recodificamos datos</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="Manipular-datos.html"><a href="Manipular-datos.html#combinar-bases-de-datos"><i class="fa fa-check"></i><b>6.4</b> Combinar bases de datos</a></li>
<li class="chapter" data-level="6.5" data-path="Manipular-datos.html"><a href="Manipular-datos.html#verbos-avanzados"><i class="fa fa-check"></i><b>6.5</b> Verbos avanzados</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="Manipular-datos.html"><a href="Manipular-datos.html#cambiar-multiples-columnas-de-un-tipo-a-otro"><i class="fa fa-check"></i><b>6.5.1</b> Cambiar multiples columnas de un tipo a otro</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="Manipular-datos.html"><a href="Manipular-datos.html#regular-expressions"><i class="fa fa-check"></i><b>6.6</b> Regular expressions</a></li>
<li class="chapter" data-level="6.7" data-path="Manipular-datos.html"><a href="Manipular-datos.html#trabajando-con-fechas"><i class="fa fa-check"></i><b>6.7</b> Trabajando con fechas</a></li>
<li class="chapter" data-level="6.8" data-path="Manipular-datos.html"><a href="Manipular-datos.html#pegando-portapapeles-a-vector-con-datapasta"><i class="fa fa-check"></i><b>6.8</b> Pegando portapapeles a vector con datapasta</a></li>
<li class="chapter" data-level="6.9" data-path="Manipular-datos.html"><a href="Manipular-datos.html#tutoriales-externos"><i class="fa fa-check"></i><b>6.9</b> Tutoriales externos</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html"><i class="fa fa-check"></i><b>7</b> Visualizar datos</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#other-resources"><i class="fa fa-check"></i><b>7.1</b> Other resources</a></li>
<li class="chapter" data-level="7.2" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#que-gráfica-puedo-usar-wip"><i class="fa fa-check"></i><b>7.2</b> Que gráfica puedo usar (WIP)</a></li>
<li class="chapter" data-level="7.3" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#tipos-de-gráficas"><i class="fa fa-check"></i><b>7.3</b> Tipos de gráficas</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#histogramas"><i class="fa fa-check"></i><b>7.3.1</b> Histogramas</a></li>
<li class="chapter" data-level="7.3.2" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#Pirate-Plot"><i class="fa fa-check"></i><b>7.3.2</b> Pirate plot</a></li>
<li class="chapter" data-level="7.3.3" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#barplots-with-individual-responses"><i class="fa fa-check"></i><b>7.3.3</b> Barplots with individual responses</a></li>
<li class="chapter" data-level="7.3.4" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#diagrama-de-caja-y-bigotes"><i class="fa fa-check"></i><b>7.3.4</b> Diagrama de caja y bigotes</a></li>
<li class="chapter" data-level="7.3.5" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#correlation-plot"><i class="fa fa-check"></i><b>7.3.5</b> Correlation plot</a></li>
<li class="chapter" data-level="7.3.6" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#beanplot"><i class="fa fa-check"></i><b>7.3.6</b> Beanplot</a></li>
<li class="chapter" data-level="7.3.7" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#scatterplot"><i class="fa fa-check"></i><b>7.3.7</b> Scatterplot</a></li>
<li class="chapter" data-level="7.3.8" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#scatterplot-con-3-variables"><i class="fa fa-check"></i><b>7.3.8</b> Scatterplot con 3 variables</a></li>
<li class="chapter" data-level="7.3.9" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#density-plots"><i class="fa fa-check"></i><b>7.3.9</b> Density plots</a></li>
<li class="chapter" data-level="7.3.10" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#density-ridges-plots-ggjoy"><i class="fa fa-check"></i><b>7.3.10</b> Density Ridges Plots (ggjoy)</a></li>
<li class="chapter" data-level="7.3.11" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#pp-plots"><i class="fa fa-check"></i><b>7.3.11</b> PP plots</a></li>
<li class="chapter" data-level="7.3.12" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#shaded-geom-area"><i class="fa fa-check"></i><b>7.3.12</b> Shaded geom area</a></li>
<li class="chapter" data-level="7.3.13" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#multiple-scatterplots"><i class="fa fa-check"></i><b>7.3.13</b> Multiple Scatterplots</a></li>
<li class="chapter" data-level="7.3.14" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#background-data"><i class="fa fa-check"></i><b>7.3.14</b> Background data</a></li>
<li class="chapter" data-level="7.3.15" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#flip-plots"><i class="fa fa-check"></i><b>7.3.15</b> Flip plots</a></li>
<li class="chapter" data-level="7.3.16" data-path="Visualizar-datos.html"><a href="Visualizar-datos.html#waffle-plots"><i class="fa fa-check"></i><b>7.3.16</b> Waffle plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Visualizar-riesgo.html"><a href="Visualizar-riesgo.html"><i class="fa fa-check"></i><b>8</b> Visualizar riesgo</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Visualizar-riesgo.html"><a href="Visualizar-riesgo.html#riskr"><i class="fa fa-check"></i><b>8.1</b> Riskr</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html"><i class="fa fa-check"></i><b>9</b> Estadistica descriptiva</a>
<ul>
<li class="chapter" data-level="9.1" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#gtsummaries"><i class="fa fa-check"></i><b>9.1</b> Gtsummaries</a></li>
<li class="chapter" data-level="9.2" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#summary-de-datos"><i class="fa fa-check"></i><b>9.2</b> Summary de datos</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#agrupamos-por-sujeto"><i class="fa fa-check"></i><b>9.2.1</b> Agrupamos por sujeto</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#descriptive-tables-latex"><i class="fa fa-check"></i><b>9.3</b> Descriptive tables latex</a></li>
<li class="chapter" data-level="9.4" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#visualize-missing-values"><i class="fa fa-check"></i><b>9.4</b> Visualize missing values</a></li>
<li class="chapter" data-level="9.5" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#tutorial-externo"><i class="fa fa-check"></i><b>9.5</b> Tutorial externo</a></li>
<li class="chapter" data-level="9.6" data-path="Estadistica-descriptiva.html"><a href="Estadistica-descriptiva.html#findviews"><i class="fa fa-check"></i><b>9.6</b> Findviews</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html"><i class="fa fa-check"></i><b>10</b> Estadistica inferencial</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#referencias-y-fuentes"><i class="fa fa-check"></i><b>10.1</b> Referencias y Fuentes</a></li>
<li class="chapter" data-level="10.2" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#association-test"><i class="fa fa-check"></i><b>10.2</b> Association test</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#frequentist-1"><i class="fa fa-check"></i><b>10.2.1</b> Frequentist</a></li>
<li class="chapter" data-level="10.2.2" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#bayesian-2"><i class="fa fa-check"></i><b>10.2.2</b> Bayesian</a></li>
<li class="chapter" data-level="10.2.3" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#results-report---wip"><i class="fa fa-check"></i><b>10.2.3</b> Results report - WIP</a></li>
<li class="chapter" data-level="10.2.4" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#references"><i class="fa fa-check"></i><b>10.2.4</b> References</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#anova-repeated-measures"><i class="fa fa-check"></i><b>10.3</b> ANOVA repeated measures</a></li>
<li class="chapter" data-level="10.4" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#mixed-models"><i class="fa fa-check"></i><b>10.4</b> Mixed Models</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#reading-list"><i class="fa fa-check"></i><b>10.4.1</b> Reading list</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#meta-analysis"><i class="fa fa-check"></i><b>10.5</b> Meta analysis</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#natural-frequencies-effect"><i class="fa fa-check"></i><b>10.5.1</b> Natural Frequencies Effect</a></li>
<li class="chapter" data-level="10.5.2" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#pictures-effect"><i class="fa fa-check"></i><b>10.5.2</b> Pictures Effect</a></li>
<li class="chapter" data-level="10.5.3" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#notes-on-meta-analysis"><i class="fa fa-check"></i><b>10.5.3</b> Notes on Meta-analysis</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Estadistica-inferencial.html"><a href="Estadistica-inferencial.html#roc-curves"><i class="fa fa-check"></i><b>10.6</b> ROC Curves</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Funciones.html"><a href="Funciones.html"><i class="fa fa-check"></i><b>11</b> Funciones</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Funciones.html"><a href="Funciones.html#creando-mi-primera-función"><i class="fa fa-check"></i><b>11.1</b> Creando mi primera función</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="Funciones.html"><a href="Funciones.html#pirate-plot-original"><i class="fa fa-check"></i><b>11.1.1</b> Pirate plot original</a></li>
<li class="chapter" data-level="11.1.2" data-path="Funciones.html"><a href="Funciones.html#nuestra-función"><i class="fa fa-check"></i><b>11.1.2</b> Nuestra función</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="pre-processing.html"><a href="pre-processing.html"><i class="fa fa-check"></i><b>12</b> Pre-processing</a>
<ul>
<li class="chapter" data-level="12.1" data-path="pre-processing.html"><a href="pre-processing.html#rt-filtering"><i class="fa fa-check"></i><b>12.1</b> RT filtering</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="pre-processing.html"><a href="pre-processing.html#function-to-filter-by-rt"><i class="fa fa-check"></i><b>12.1.1</b> Function to filter by RT</a></li>
<li class="chapter" data-level="12.1.2" data-path="pre-processing.html"><a href="pre-processing.html#n-sd-from-the-median-mad-1"><i class="fa fa-check"></i><b>12.1.2</b> n SD from the median (MAD)</a></li>
<li class="chapter" data-level="12.1.3" data-path="pre-processing.html"><a href="pre-processing.html#gamma-law-regression-analyses-2"><i class="fa fa-check"></i><b>12.1.3</b> Gamma law regression analyses</a></li>
<li class="chapter" data-level="12.1.4" data-path="pre-processing.html"><a href="pre-processing.html#logarithms"><i class="fa fa-check"></i><b>12.1.4</b> Logarithms</a></li>
<li class="chapter" data-level="12.1.5" data-path="pre-processing.html"><a href="pre-processing.html#references-1"><i class="fa fa-check"></i><b>12.1.5</b> References</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="pre-processing.html"><a href="pre-processing.html#reliability"><i class="fa fa-check"></i><b>12.2</b> Reliability</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="pre-processing.html"><a href="pre-processing.html#cronbachs-alpha"><i class="fa fa-check"></i><b>12.2.1</b> Cronbach’s Alpha</a></li>
<li class="chapter" data-level="12.2.2" data-path="pre-processing.html"><a href="pre-processing.html#omega"><i class="fa fa-check"></i><b>12.2.2</b> Omega</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="pre-processing.html"><a href="pre-processing.html#inter-rater-reliability"><i class="fa fa-check"></i><b>12.3</b> Inter rater reliability</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="pre-processing.html"><a href="pre-processing.html#references-2"><i class="fa fa-check"></i><b>12.3.1</b> References</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="pre-processing.html"><a href="pre-processing.html#impute-missing-data"><i class="fa fa-check"></i><b>12.4</b> Impute missing data</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="pre-processing.html"><a href="pre-processing.html#impute-with-mice"><i class="fa fa-check"></i><b>12.4.1</b> Impute with mice</a></li>
<li class="chapter" data-level="12.4.2" data-path="pre-processing.html"><a href="pre-processing.html#impute-with-recipes"><i class="fa fa-check"></i><b>12.4.2</b> Impute with recipes</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="experimental-design.html"><a href="experimental-design.html"><i class="fa fa-check"></i><b>13</b> Experimental design</a>
<ul>
<li class="chapter" data-level="13.1" data-path="experimental-design.html"><a href="experimental-design.html#tamaño-de-muestra-y-efecto-detectado"><i class="fa fa-check"></i><b>13.1</b> Tamaño de muestra y efecto detectado</a></li>
<li class="chapter" data-level="13.2" data-path="experimental-design.html"><a href="experimental-design.html#power-analysis"><i class="fa fa-check"></i><b>13.2</b> Power analysis</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="experimental-design.html"><a href="experimental-design.html#longitudinal-designs"><i class="fa fa-check"></i><b>13.2.1</b> Longitudinal designs</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="experimental-design.html"><a href="experimental-design.html#anonimizar-participantes---encriptar-ids"><i class="fa fa-check"></i><b>13.3</b> Anonimizar participantes - Encriptar IDs</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="experimental-design.html"><a href="experimental-design.html#encriptando-y-desencriptando-un-elemento"><i class="fa fa-check"></i><b>13.3.1</b> Encriptando y desencriptando un elemento</a></li>
<li class="chapter" data-level="13.3.2" data-path="experimental-design.html"><a href="experimental-design.html#encriptando-y-desencriptando-la-columna-rut-de-una-db-completa."><i class="fa fa-check"></i><b>13.3.2</b> Encriptando y desencriptando la columna RUT de una DB completa.</a></li>
<li class="chapter" data-level="13.3.3" data-path="experimental-design.html"><a href="experimental-design.html#encriptando-algo-que-no-sean-numeros"><i class="fa fa-check"></i><b>13.3.3</b> Encriptando algo que no sean numeros</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="experimental-design.html"><a href="experimental-design.html#match-participants"><i class="fa fa-check"></i><b>13.4</b> Match participants</a></li>
<li class="chapter" data-level="13.5" data-path="experimental-design.html"><a href="experimental-design.html#determine-distribution"><i class="fa fa-check"></i><b>13.5</b> Determine distribution</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="classification.html"><a href="classification.html"><i class="fa fa-check"></i><b>14</b> Classification</a>
<ul>
<li class="chapter" data-level="14.1" data-path="classification.html"><a href="classification.html#fast-and-frugal-trees"><i class="fa fa-check"></i><b>14.1</b> Fast and frugal trees</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="other-stuff.html"><a href="other-stuff.html"><i class="fa fa-check"></i><b>15</b> Other stuff</a>
<ul>
<li class="chapter" data-level="15.1" data-path="other-stuff.html"><a href="other-stuff.html#maps---generate-and-locate-cities-in-a-world-map"><i class="fa fa-check"></i><b>15.1</b> Maps - Generate and locate cities in a world map</a></li>
<li class="chapter" data-level="15.2" data-path="other-stuff.html"><a href="other-stuff.html#extract-tables-from-the-internet"><i class="fa fa-check"></i><b>15.2</b> Extract tables from the internet</a></li>
<li class="chapter" data-level="15.3" data-path="other-stuff.html"><a href="other-stuff.html#extract-tables-from-the-internet-1"><i class="fa fa-check"></i><b>15.3</b> Extract tables from the internet</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="ejercicios-y-soluciones.html"><a href="ejercicios-y-soluciones.html"><i class="fa fa-check"></i><b>16</b> Ejercicios y soluciones</a>
<ul>
<li class="chapter" data-level="16.1" data-path="ejercicios-y-soluciones.html"><a href="ejercicios-y-soluciones.html#Ejercicios1"><i class="fa fa-check"></i><b>16.1</b> Ejercicios 1</a></li>
<li class="chapter" data-level="16.2" data-path="ejercicios-y-soluciones.html"><a href="ejercicios-y-soluciones.html#Ejercicios2"><i class="fa fa-check"></i><b>16.2</b> Ejercicios 2</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="bibliography-and-interesting-resources.html"><a href="bibliography-and-interesting-resources.html"><i class="fa fa-check"></i><b>17</b> Bibliography and interesting resources</a>
<ul>
<li class="chapter" data-level="17.1" data-path="bibliography-and-interesting-resources.html"><a href="bibliography-and-interesting-resources.html#bibliography"><i class="fa fa-check"></i><b>17.1</b> Bibliography</a></li>
<li class="chapter" data-level="17.2" data-path="bibliography-and-interesting-resources.html"><a href="bibliography-and-interesting-resources.html#interesting-resources---potentially"><i class="fa fa-check"></i><b>17.2</b> Interesting resources - potentially</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="todo-curso-basico-r-2016.html"><a href="todo-curso-basico-r-2016.html"><i class="fa fa-check"></i><b>18</b> TODO - Curso Basico R - 2016</a>
<ul>
<li class="chapter" data-level="18.1" data-path="todo-curso-basico-r-2016.html"><a href="todo-curso-basico-r-2016.html#en-ejercicios"><i class="fa fa-check"></i><b>18.1</b> EN EJERCICIOS:</a></li>
<li class="chapter" data-level="18.2" data-path="todo-curso-basico-r-2016.html"><a href="todo-curso-basico-r-2016.html#todo---limpieza-general"><i class="fa fa-check"></i><b>18.2</b> TODO - Limpieza general</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="todo-1.html"><a href="todo-1.html"><i class="fa fa-check"></i><b>19</b> TODO</a>
<ul>
<li class="chapter" data-level="19.1" data-path="todo-1.html"><a href="todo-1.html#urgent-stuff"><i class="fa fa-check"></i><b>19.1</b> Urgent stuff</a></li>
<li class="chapter" data-level="19.2" data-path="todo-1.html"><a href="todo-1.html#important"><i class="fa fa-check"></i><b>19.2</b> Important</a></li>
<li class="chapter" data-level="19.3" data-path="todo-1.html"><a href="todo-1.html#various"><i class="fa fa-check"></i><b>19.3</b> Various</a></li>
<li class="chapter" data-level="19.4" data-path="todo-1.html"><a href="todo-1.html#index-proposal"><i class="fa fa-check"></i><b>19.4</b> <strong>INDEX PROPOSAL</strong></a></li>
<li class="chapter" data-level="19.5" data-path="todo-1.html"><a href="todo-1.html#style-guide"><i class="fa fa-check"></i><b>19.5</b> Style guide</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="todo-1.html"><a href="todo-1.html#sections"><i class="fa fa-check"></i><b>19.5.1</b> Sections</a></li>
<li class="chapter" data-level="19.5.2" data-path="todo-1.html"><a href="todo-1.html#general"><i class="fa fa-check"></i><b>19.5.2</b> General</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="todo-1.html"><a href="todo-1.html#notas---remember"><i class="fa fa-check"></i><b>19.6</b> NOTAS - REMEMBER</a>
<ul>
<li class="chapter" data-level="19.6.1" data-path="todo-1.html"><a href="todo-1.html#refs"><i class="fa fa-check"></i><b>19.6.1</b> REFS</a></li>
<li class="chapter" data-level="19.6.2" data-path="todo-1.html"><a href="todo-1.html#notas"><i class="fa fa-check"></i><b>19.6.2</b> NOTAS</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R - Statistics Manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="experimental-design" class="section level1" number="13">
<h1><span class="header-section-number">13</span> Experimental design</h1>
<div id="tamaño-de-muestra-y-efecto-detectado" class="section level2" number="13.1">
<h2><span class="header-section-number">13.1</span> Tamaño de muestra y efecto detectado</h2>
<p>En esta simulación se muestra como con tamaños de muestra pequeños, se sobreestima el tamaño de efecto real. Como se puede ver en el codigo, solo se muestran los estudios simulados donde la correlacion es significativa. Ver el <a href="https://jimgrange.wordpress.com/2017/03/06/low-power-effect-sizes/">blog de Jim Grange</a> para una explicación más detallada.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="experimental-design.html#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="co"># https://jimgrange.wordpress.com/2017/03/06/low-power-effect-sizes/</span></span>
<span id="cb399-2"><a href="experimental-design.html#cb399-2" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-3"><a href="experimental-design.html#cb399-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb399-4"><a href="experimental-design.html#cb399-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-5"><a href="experimental-design.html#cb399-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">50</span>)</span>
<span id="cb399-6"><a href="experimental-design.html#cb399-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-7"><a href="experimental-design.html#cb399-7" aria-hidden="true" tabindex="-1"></a><span class="co"># function for generating random draws from multivariate distribution</span></span>
<span id="cb399-8"><a href="experimental-design.html#cb399-8" aria-hidden="true" tabindex="-1"></a><span class="co"># n = number of draws; p = number of variables</span></span>
<span id="cb399-9"><a href="experimental-design.html#cb399-9" aria-hidden="true" tabindex="-1"></a><span class="co"># u = mean of each variable; s = SD of each variable</span></span>
<span id="cb399-10"><a href="experimental-design.html#cb399-10" aria-hidden="true" tabindex="-1"></a><span class="co"># corMat = correlation matrix</span></span>
<span id="cb399-11"><a href="experimental-design.html#cb399-11" aria-hidden="true" tabindex="-1"></a>mvrnorm <span class="ot">&lt;-</span> <span class="cf">function</span>(n, p, u, s, corMat) {</span>
<span id="cb399-12"><a href="experimental-design.html#cb399-12" aria-hidden="true" tabindex="-1"></a>  Z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(n <span class="sc">*</span> p), p, n)</span>
<span id="cb399-13"><a href="experimental-design.html#cb399-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>(u <span class="sc">+</span> s <span class="sc">*</span> <span class="fu">t</span>(<span class="fu">chol</span>(corMat)) <span class="sc">%*%</span> Z)</span>
<span id="cb399-14"><a href="experimental-design.html#cb399-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb399-15"><a href="experimental-design.html#cb399-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-16"><a href="experimental-design.html#cb399-16" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-17"><a href="experimental-design.html#cb399-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-18"><a href="experimental-design.html#cb399-18" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-19"><a href="experimental-design.html#cb399-19" aria-hidden="true" tabindex="-1"></a><span class="do">### simulation setup</span></span>
<span id="cb399-20"><a href="experimental-design.html#cb399-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-21"><a href="experimental-design.html#cb399-21" aria-hidden="true" tabindex="-1"></a><span class="co"># declare simulation parameters</span></span>
<span id="cb399-22"><a href="experimental-design.html#cb399-22" aria-hidden="true" tabindex="-1"></a>means <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">600</span>)</span>
<span id="cb399-23"><a href="experimental-design.html#cb399-23" aria-hidden="true" tabindex="-1"></a>sds <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">80</span>)</span>
<span id="cb399-24"><a href="experimental-design.html#cb399-24" aria-hidden="true" tabindex="-1"></a>n_sims <span class="ot">=</span> <span class="dv">1000</span></span>
<span id="cb399-25"><a href="experimental-design.html#cb399-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-26"><a href="experimental-design.html#cb399-26" aria-hidden="true" tabindex="-1"></a><span class="co"># declare correlation coefficient &amp; generate cor. matrix</span></span>
<span id="cb399-27"><a href="experimental-design.html#cb399-27" aria-hidden="true" tabindex="-1"></a>cor <span class="ot">&lt;-</span> <span class="fl">0.3</span></span>
<span id="cb399-28"><a href="experimental-design.html#cb399-28" aria-hidden="true" tabindex="-1"></a>cor_mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span>, cor, </span>
<span id="cb399-29"><a href="experimental-design.html#cb399-29" aria-hidden="true" tabindex="-1"></a>                    cor, <span class="dv">1</span>), <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb399-30"><a href="experimental-design.html#cb399-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-31"><a href="experimental-design.html#cb399-31" aria-hidden="true" tabindex="-1"></a><span class="co"># sample sizes to simulate</span></span>
<span id="cb399-32"><a href="experimental-design.html#cb399-32" aria-hidden="true" tabindex="-1"></a>sample_sizes <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">50</span>, <span class="dv">85</span>, <span class="dv">170</span>, <span class="dv">500</span>, <span class="dv">1000</span>)</span>
<span id="cb399-33"><a href="experimental-design.html#cb399-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-34"><a href="experimental-design.html#cb399-34" aria-hidden="true" tabindex="-1"></a><span class="co"># number of simulations</span></span>
<span id="cb399-35"><a href="experimental-design.html#cb399-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-36"><a href="experimental-design.html#cb399-36" aria-hidden="true" tabindex="-1"></a><span class="co"># create variable to store data in</span></span>
<span id="cb399-37"><a href="experimental-design.html#cb399-37" aria-hidden="true" tabindex="-1"></a>final_data <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> n_sims, <span class="at">ncol =</span> <span class="fu">length</span>(sample_sizes))</span>
<span id="cb399-38"><a href="experimental-design.html#cb399-38" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(final_data) <span class="ot">&lt;-</span> sample_sizes</span>
<span id="cb399-39"><a href="experimental-design.html#cb399-39" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-40"><a href="experimental-design.html#cb399-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-41"><a href="experimental-design.html#cb399-41" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-42"><a href="experimental-design.html#cb399-42" aria-hidden="true" tabindex="-1"></a><span class="do">### simulation execution</span></span>
<span id="cb399-43"><a href="experimental-design.html#cb399-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-44"><a href="experimental-design.html#cb399-44" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(sample_sizes)){</span>
<span id="cb399-45"><a href="experimental-design.html#cb399-45" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n_sims){</span>
<span id="cb399-46"><a href="experimental-design.html#cb399-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb399-47"><a href="experimental-design.html#cb399-47" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get the experiment data</span></span>
<span id="cb399-48"><a href="experimental-design.html#cb399-48" aria-hidden="true" tabindex="-1"></a>    sim_data <span class="ot">&lt;-</span> <span class="fu">mvrnorm</span>(sample_sizes[i], <span class="at">p =</span> <span class="dv">2</span>, <span class="at">u =</span> means, <span class="at">s =</span> sds, </span>
<span id="cb399-49"><a href="experimental-design.html#cb399-49" aria-hidden="true" tabindex="-1"></a>                        <span class="at">corMat =</span> cor_mat)</span>
<span id="cb399-50"><a href="experimental-design.html#cb399-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb399-51"><a href="experimental-design.html#cb399-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># perform the correlation</span></span>
<span id="cb399-52"><a href="experimental-design.html#cb399-52" aria-hidden="true" tabindex="-1"></a>    sim_cor <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(sim_data[, <span class="dv">1</span>], sim_data[, <span class="dv">2</span>], <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span>
<span id="cb399-53"><a href="experimental-design.html#cb399-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb399-54"><a href="experimental-design.html#cb399-54" aria-hidden="true" tabindex="-1"></a>    <span class="co"># if the correlation is significant, store the effect size</span></span>
<span id="cb399-55"><a href="experimental-design.html#cb399-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(sim_cor<span class="sc">$</span>p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>){</span>
<span id="cb399-56"><a href="experimental-design.html#cb399-56" aria-hidden="true" tabindex="-1"></a>      final_data[j, i] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">round</span>(<span class="fu">abs</span>(sim_cor<span class="sc">$</span>estimate), <span class="dv">3</span>))</span>
<span id="cb399-57"><a href="experimental-design.html#cb399-57" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb399-58"><a href="experimental-design.html#cb399-58" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb399-59"><a href="experimental-design.html#cb399-59" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb399-60"><a href="experimental-design.html#cb399-60" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-61"><a href="experimental-design.html#cb399-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-62"><a href="experimental-design.html#cb399-62" aria-hidden="true" tabindex="-1"></a><span class="co">#------------------------------------------------------------------------------</span></span>
<span id="cb399-63"><a href="experimental-design.html#cb399-63" aria-hidden="true" tabindex="-1"></a><span class="do">## draw the plot</span></span>
<span id="cb399-64"><a href="experimental-design.html#cb399-64" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(final_data, <span class="at">na.action=</span>na.omit, <span class="at">xlab =</span> <span class="st">&quot;Simulated Sample Size&quot;</span>, </span>
<span id="cb399-65"><a href="experimental-design.html#cb399-65" aria-hidden="true" tabindex="-1"></a>        <span class="at">ylab =</span> <span class="st">&quot;Measured Effect Size&quot;</span>)</span>
<span id="cb399-66"><a href="experimental-design.html#cb399-66" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="at">h =</span> cor, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span>
<span id="cb399-67"><a href="experimental-design.html#cb399-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-68"><a href="experimental-design.html#cb399-68" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>, <span class="st">&quot;True Effect Size&quot;</span>, <span class="at">cex =</span> <span class="fl">1.5</span>,  <span class="at">lty =</span> <span class="dv">2</span>, <span class="at">bty=</span><span class="st">&quot;n&quot;</span>, </span>
<span id="cb399-69"><a href="experimental-design.html#cb399-69" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lwd =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/sample_size_calculation-1.png" width="672" /></p>
</div>
<div id="power-analysis" class="section level2" number="13.2">
<h2><span class="header-section-number">13.2</span> Power analysis</h2>
<p>Usamos el paquete <code>pwr</code>: <a href="https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html" class="uri">https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html</a>. En este tenemos un conjunto de funciones que nos permiten hacer power analysis para distintos tipos de diseños:</p>
<ul>
<li>pwr.p.test: one-sample proportion test</li>
<li>pwr.2p.test: two-sample proportion test</li>
<li>pwr.2p2n.test: two-sample proportion test (unequal sample sizes)</li>
<li>vpwr.t.test: two-sample, one-sample and paired t-tests</li>
<li>pwr.t2n.test: two-sample t-tests (unequal sample sizes)</li>
<li>pwr.anova.test: one-way balanced ANOVA</li>
<li>pwr.r.test: correlation test</li>
<li>pwr.chisq.test: chi-squared test (goodness of fit and association)</li>
<li>pwr.f2.test: test for the general linear model</li>
</ul>
<p>En cada uno de ellos podemos modificar varios parámetros. El parámetro que dejemos sin especificar será el que se calculará:</p>
<ul>
<li>k = groups<br />
</li>
<li>n = participants (in each group)<br />
</li>
<li>f = effect size<br />
</li>
<li>sig.level = sig level<br />
</li>
<li>power = power<br />
</li>
<li>etc.</li>
</ul>
<p>Conventional effect sizes for all tests in the pwr package (SOURCE: <a href="https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html" class="uri">https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html</a>):</p>
<table>
<thead>
<tr class="header">
<th>Test</th>
<th>small</th>
<th>medium</th>
<th>large</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tests for proportions (p)</td>
<td>0.2</td>
<td>0.5</td>
<td>0.8</td>
</tr>
<tr class="even">
<td>tests for means (t)</td>
<td>0.2</td>
<td>0.5</td>
<td>0.8</td>
</tr>
<tr class="odd">
<td>chi-square tests (chisq)</td>
<td>0.1</td>
<td>0.3</td>
<td>0.5</td>
</tr>
<tr class="even">
<td>correlation test (r)</td>
<td>0.1</td>
<td>0.3</td>
<td>0.5</td>
</tr>
<tr class="odd">
<td>anova (anov)</td>
<td>0.1</td>
<td>0.25</td>
<td>0.4</td>
</tr>
<tr class="even">
<td>general linear model (f2)</td>
<td>0.02</td>
<td>0.15</td>
<td>0.35</td>
</tr>
</tbody>
</table>
<p><strong>Libraries</strong></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="experimental-design.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;pwr&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;pwr&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;pwr&#39;</span>)</span></code></pre></div>
<p><strong>Code</strong></p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="experimental-design.html#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="co">#T-test</span></span>
<span id="cb401-2"><a href="experimental-design.html#cb401-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t.test</span>(<span class="at">n =</span> , <span class="at">d =</span> <span class="fl">0.8</span>, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> <span class="fl">0.95</span>, <span class="at">type =</span> <span class="fu">c</span>(<span class="st">&quot;two.sample&quot;</span>))</span></code></pre></div>
<pre><code>## 
##      Two-sample t test power calculation 
## 
##               n = 41.59413
##               d = 0.8
##       sig.level = 0.05
##           power = 0.95
##     alternative = two.sided
## 
## NOTE: n is number in *each* group</code></pre>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="experimental-design.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="co">#T-test </span></span>
<span id="cb403-2"><a href="experimental-design.html#cb403-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.t2n.test</span>(<span class="at">n1 =</span> <span class="dv">150</span>, <span class="at">n2 =</span> <span class="dv">75</span>, <span class="at">d =</span> , <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>## 
##      t test power calculation 
## 
##              n1 = 150
##              n2 = 75
##               d = 0.3979226
##       sig.level = 0.05
##           power = 0.8
##     alternative = two.sided</code></pre>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="experimental-design.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Anova </span></span>
<span id="cb405-2"><a href="experimental-design.html#cb405-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.anova.test</span>(<span class="at">k =</span> <span class="dv">3</span>, <span class="at">n =</span> , <span class="at">f =</span> .<span class="dv">25</span>, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> .<span class="dv">8</span>)</span></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 3
##               n = 52.3966
##               f = 0.25
##       sig.level = 0.05
##           power = 0.8
## 
## NOTE: n is number in each group</code></pre>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="experimental-design.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Effect size that we can detect</span></span>
<span id="cb407-2"><a href="experimental-design.html#cb407-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.anova.test</span>(<span class="at">k =</span> <span class="dv">6</span>, <span class="at">n =</span> <span class="dv">42</span>, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> .<span class="dv">95</span>)</span></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 6
##               n = 42
##               f = 0.283334
##       sig.level = 0.05
##           power = 0.95
## 
## NOTE: n is number in each group</code></pre>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="experimental-design.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Sample size needed to detect an effect of f=0.5</span></span>
<span id="cb409-2"><a href="experimental-design.html#cb409-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pwr.anova.test</span>(<span class="at">k =</span> <span class="dv">2</span>, <span class="at">f =</span> <span class="fl">0.5</span>, <span class="at">sig.level =</span> <span class="fl">0.05</span>, <span class="at">power =</span> .<span class="dv">95</span>)</span></code></pre></div>
<pre><code>## 
##      Balanced one-way analysis of variance power calculation 
## 
##               k = 2
##               n = 26.9892
##               f = 0.5
##       sig.level = 0.05
##           power = 0.95
## 
## NOTE: n is number in each group</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="experimental-design.html#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># General linear model</span></span>
<span id="cb411-2"><a href="experimental-design.html#cb411-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># See example in https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html</span></span>
<span id="cb411-3"><a href="experimental-design.html#cb411-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pwr.f2.test</span>(<span class="at">u =</span> <span class="dv">2</span>, <span class="at">f2 =</span> <span class="fl">0.3</span><span class="sc">/</span>(<span class="dv">1</span> <span class="sc">-</span> <span class="fl">0.3</span>), <span class="at">sig.level =</span> <span class="fl">0.001</span>, <span class="at">power =</span> <span class="fl">0.8</span>)</span></code></pre></div>
<pre><code>## 
##      Multiple regression power calculation 
## 
##               u = 2
##               v = 49.88971
##              f2 = 0.4285714
##       sig.level = 0.001
##           power = 0.8</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="experimental-design.html#cb413-1" aria-hidden="true" tabindex="-1"></a>  <span class="co">#  n=v+u+1. Therefore he needs 50 + 2 + 1 = 53 student records.</span></span></code></pre></div>
<div id="longitudinal-designs" class="section level3" number="13.2.1">
<h3><span class="header-section-number">13.2.1</span> Longitudinal designs</h3>
<p>Calculate sample size for longitudinal designs</p>
<p><strong>Libraries</strong></p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="experimental-design.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;powerMediation&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;powerMediation&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;powerMediation&#39;</span>)</span></code></pre></div>
<p><strong>Code</strong></p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="experimental-design.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssLong</span>(<span class="at">es =</span> <span class="fl">0.5</span>, <span class="co">#  effect size of the difference of mean change.</span></span>
<span id="cb415-2"><a href="experimental-design.html#cb415-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">rho =</span> <span class="fl">0.5</span>, <span class="co"># correlation coefficient between baseline and follow-up values within a treatment group.</span></span>
<span id="cb415-3"><a href="experimental-design.html#cb415-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">alpha =</span> <span class="fl">0.05</span>, </span>
<span id="cb415-4"><a href="experimental-design.html#cb415-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">power =</span> <span class="fl">0.95</span>)</span></code></pre></div>
<pre><code>## [1] 104</code></pre>

</div>
</div>
<div id="anonimizar-participantes---encriptar-ids" class="section level2" number="13.3">
<h2><span class="header-section-number">13.3</span> Anonimizar participantes - Encriptar IDs</h2>
<p>Con safer podemos encriptar cualquier cosa.</p>
<p>Con hashids solo podemos encriptar IDs numericos.</p>
<p><strong>Libraries</strong></p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="experimental-design.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;hashids&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;hashids&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;hashids&#39;</span>)</span>
<span id="cb417-2"><a href="experimental-design.html#cb417-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;safer&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;safer&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;safer&#39;</span>)</span>
<span id="cb417-3"><a href="experimental-design.html#cb417-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;dplyr&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;dplyr&#39;</span>)</span></code></pre></div>
<div id="encriptando-y-desencriptando-un-elemento" class="section level3" number="13.3.1">
<h3><span class="header-section-number">13.3.1</span> Encriptando y desencriptando un elemento</h3>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="experimental-design.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># No acepta acentos, ñs, etc.</span></span>
<span id="cb418-2"><a href="experimental-design.html#cb418-2" aria-hidden="true" tabindex="-1"></a>h <span class="ot">=</span> <span class="fu">hashid_settings</span>(<span class="at">salt =</span> <span class="st">&#39;this is my salt&#39;</span>)</span>
<span id="cb418-3"><a href="experimental-design.html#cb418-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb418-4"><a href="experimental-design.html#cb418-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Numbers to encode</span></span>
<span id="cb418-5"><a href="experimental-design.html#cb418-5" aria-hidden="true" tabindex="-1"></a>Plain_ID <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">12345678</span>); Plain_ID</span></code></pre></div>
<pre><code>## [1] 12345678</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="experimental-design.html#cb420-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="fu">encode</span>(Plain_ID, h); a <span class="co">#&quot;BZ9RNV&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;BZ9RNV&quot;</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="experimental-design.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">decode</span>(<span class="st">&quot;BZ9RNV&quot;</span>, h) <span class="co">#12345678</span></span></code></pre></div>
<pre><code>## [1] 12345678</code></pre>
</div>
<div id="encriptando-y-desencriptando-la-columna-rut-de-una-db-completa." class="section level3" number="13.3.2">
<h3><span class="header-section-number">13.3.2</span> Encriptando y desencriptando la columna RUT de una DB completa.</h3>
<p>Generamos aleatoriamente numeros de identificacion “similares” a RUTs, los encriptamos, y despues desencriptamos.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="experimental-design.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos librerias y leemos DB</span></span>
<span id="cb424-2"><a href="experimental-design.html#cb424-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;hashids&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;hashids&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;hashids&#39;</span>)</span>
<span id="cb424-3"><a href="experimental-design.html#cb424-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;dplyr&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;dplyr&#39;</span>)</span>
<span id="cb424-4"><a href="experimental-design.html#cb424-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-5"><a href="experimental-design.html#cb424-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Pseudo RUTs generadas aleatoriamente</span></span>
<span id="cb424-6"><a href="experimental-design.html#cb424-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">100</span>)<span class="sc">*</span><span class="dv">10000000</span>) <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb424-7"><a href="experimental-design.html#cb424-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">RUT =</span> value)</span></code></pre></div>
<p><strong>BUG: When building book with Bookdown, it ignores the rowwise() argument!?</strong></p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="experimental-design.html#cb425-1" aria-hidden="true" tabindex="-1"></a>h <span class="ot">=</span> <span class="fu">hashid_settings</span>(<span class="at">salt =</span> <span class="st">&#39;this is my salt&#39;</span>)</span>
<span id="cb425-2"><a href="experimental-design.html#cb425-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb425-3"><a href="experimental-design.html#cb425-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Encriptamos</span></span>
<span id="cb425-4"><a href="experimental-design.html#cb425-4" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb425-5"><a href="experimental-design.html#cb425-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb425-6"><a href="experimental-design.html#cb425-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RUT_Encripted =</span> <span class="fu">encode</span>(RUT, h))</span>
<span id="cb425-7"><a href="experimental-design.html#cb425-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb425-8"><a href="experimental-design.html#cb425-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Desencriptamos</span></span>
<span id="cb425-9"><a href="experimental-design.html#cb425-9" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb425-10"><a href="experimental-design.html#cb425-10" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb425-11"><a href="experimental-design.html#cb425-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RUT_Decripted =</span> <span class="fu">decode</span>(RUT_Encripted, h))</span></code></pre></div>
<pre><code>## Warning in if (hash_str == &quot;&quot;) stop(&quot;decode: invalid hashid&quot;): the
## condition has length &gt; 1 and only the first element will be used</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="experimental-design.html#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostramos los resultados</span></span>
<span id="cb427-2"><a href="experimental-design.html#cb427-2" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> <span class="fu">select</span>(RUT_Encripted, RUT_Decripted, RUT)</span></code></pre></div>
<pre><code>## Source: local data frame [100 x 3]
## Groups: &lt;by row&gt;
## 
## # A tibble: 100 x 3
##    RUT_Encripted                                       RUT_Decripted    RUT
##  * &lt;chr&gt;                                                       &lt;dbl&gt;  &lt;dbl&gt;
##  1 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       2832261 2.83e6
##  2 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       7583306 7.58e6
##  3 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       3955537 3.96e6
##  4 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       8587857 8.59e6
##  5 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       2879598 2.88e6
##  6 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       9179372 9.18e6
##  7 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       5208890 5.21e6
##  8 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       1422724 1.42e6
##  9 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       5975451 5.98e6
## 10 kB3YkhnpJ2WCB7aDLh5knmJcN7oetq9xPmIv59o8C53r8tPR7k…       9688978 9.69e6
## # … with 90 more rows</code></pre>
</div>
<div id="encriptando-algo-que-no-sean-numeros" class="section level3" number="13.3.3">
<h3><span class="header-section-number">13.3.3</span> Encriptando algo que no sean numeros</h3>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="experimental-design.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;safer&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;safer&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;safer&#39;</span>)</span>
<span id="cb429-2"><a href="experimental-design.html#cb429-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;dplyr&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;dplyr&#39;</span>)</span>
<span id="cb429-3"><a href="experimental-design.html#cb429-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-4"><a href="experimental-design.html#cb429-4" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">encrypt_string</span>(<span class="st">&quot;hello, how are you&quot;</span>, <span class="at">key =</span> <span class="st">&quot;mi clave secreta&quot;</span>)</span>
<span id="cb429-5"><a href="experimental-design.html#cb429-5" aria-hidden="true" tabindex="-1"></a><span class="fu">decrypt_string</span>(temp, <span class="st">&quot;mi clave secreta&quot;</span>)</span>
<span id="cb429-6"><a href="experimental-design.html#cb429-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-7"><a href="experimental-design.html#cb429-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-8"><a href="experimental-design.html#cb429-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-9"><a href="experimental-design.html#cb429-9" aria-hidden="true" tabindex="-1"></a>KEY <span class="ot">=</span> <span class="st">&quot;my super secret key&quot;</span></span>
<span id="cb429-10"><a href="experimental-design.html#cb429-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-11"><a href="experimental-design.html#cb429-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Pseudo RUTs generadas aleatoriamente</span></span>
<span id="cb429-12"><a href="experimental-design.html#cb429-12" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">100</span>)<span class="sc">*</span><span class="dv">10000000</span>) <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb429-13"><a href="experimental-design.html#cb429-13" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">RUT =</span> value)</span>
<span id="cb429-14"><a href="experimental-design.html#cb429-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-15"><a href="experimental-design.html#cb429-15" aria-hidden="true" tabindex="-1"></a><span class="co"># **</span><span class="al">BUG</span><span class="co">: When building book with Bookdown, it ignores the rowwise() argument!?**. Sin este argumento falla la funcion</span></span>
<span id="cb429-16"><a href="experimental-design.html#cb429-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-17"><a href="experimental-design.html#cb429-17" aria-hidden="true" tabindex="-1"></a>data <span class="sc">%&gt;%</span> </span>
<span id="cb429-18"><a href="experimental-design.html#cb429-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">RUT =</span> <span class="fu">paste0</span>(<span class="st">&quot;x&quot;</span>, RUT)) <span class="sc">%&gt;%</span> </span>
<span id="cb429-19"><a href="experimental-design.html#cb429-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb429-20"><a href="experimental-design.html#cb429-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Encrypt</span></span>
<span id="cb429-21"><a href="experimental-design.html#cb429-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb429-22"><a href="experimental-design.html#cb429-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">encrypt_string</span>(<span class="fu">as.character</span>(RUT), <span class="at">key =</span> KEY)) <span class="sc">%&gt;%</span> </span>
<span id="cb429-23"><a href="experimental-design.html#cb429-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(RUT, ID) <span class="sc">%&gt;%</span> </span>
<span id="cb429-24"><a href="experimental-design.html#cb429-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb429-25"><a href="experimental-design.html#cb429-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Decrypt</span></span>
<span id="cb429-26"><a href="experimental-design.html#cb429-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID2 =</span> <span class="fu">decrypt_string</span>(ID, <span class="at">key =</span> KEY)) </span></code></pre></div>

</div>
</div>
<div id="match-participants" class="section level2" number="13.4">
<h2><span class="header-section-number">13.4</span> Match participants</h2>
<hr />
<p>Usaremos la siguiente <a href="Data/11-Experimental_design/Match_participants.csv">Base de datos</a></p>
<hr />
<div class="sourceCode" id="cb430"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb430-1"><a href="experimental-design.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargamos librerias y leemos DBif (!require(&#39;pacman&#39;)) install.packages(&#39;pacman&#39;); library(&#39;pacman&#39;)</span></span>
<span id="cb430-2"><a href="experimental-design.html#cb430-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;optmatch&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;optmatch&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;optmatch&#39;</span>)</span>
<span id="cb430-3"><a href="experimental-design.html#cb430-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;readr&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;readr&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;readr&#39;</span>)</span>
<span id="cb430-4"><a href="experimental-design.html#cb430-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;dplyr&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;dplyr&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;dplyr&#39;</span>)</span>
<span id="cb430-5"><a href="experimental-design.html#cb430-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-6"><a href="experimental-design.html#cb430-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Archivo de data crudos</span></span>
<span id="cb430-7"><a href="experimental-design.html#cb430-7" aria-hidden="true" tabindex="-1"></a><span class="co"># RUTs y Edades generadas aleatoriamente</span></span>
<span id="cb430-8"><a href="experimental-design.html#cb430-8" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/11-Experimental_design/Match_participants.csv&quot;</span>)</span>
<span id="cb430-9"><a href="experimental-design.html#cb430-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-10"><a href="experimental-design.html#cb430-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(data)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##      ID    RUT Sexo    Edad Ocupacion            Educacion Porcentaje_ahor…
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                &lt;chr&gt;                &lt;dbl&gt;
## 1     1 588006 Mujer     29 ASISTENTE DE TESORE… Técnica                 10
## 2     2 188576 Mujer     21 Ingeniero Comercial  Maestría                50
## 3     3 206609 Hombre    46 trabajador           Técnica                  5
## 4     4 404898 Mujer     52 Psicóloga            Maestría                 0
## 5     5 533281 Mujer     63 Controller Postgrad… Maestría                 4
## 6     6  60824 Hombre    29 Ingeniro Comercial   Maestría                 8</code></pre>
<p>Preparamos la base de datos</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="experimental-design.html#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Umbrales para ahorradores y no ahorradores</span></span>
<span id="cb432-2"><a href="experimental-design.html#cb432-2" aria-hidden="true" tabindex="-1"></a>Criterio_ahorradores <span class="ot">=</span> <span class="dv">20</span></span>
<span id="cb432-3"><a href="experimental-design.html#cb432-3" aria-hidden="true" tabindex="-1"></a>Criterio_no_ahorradores <span class="ot">=</span> <span class="dv">2</span></span>
<span id="cb432-4"><a href="experimental-design.html#cb432-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-5"><a href="experimental-design.html#cb432-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostramos histograma</span></span>
<span id="cb432-6"><a href="experimental-design.html#cb432-6" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(data<span class="sc">$</span>Porcentaje_ahorro, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/match_participants_data_preparation-1.png" width="672" /></p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="experimental-design.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creamos grupos de Ahorradores (0) y No ahorradores (1)</span></span>
<span id="cb433-2"><a href="experimental-design.html#cb433-2" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>Ahorro <span class="ot">=</span> <span class="fu">ifelse</span>(data<span class="sc">$</span>Porcentaje_ahorro <span class="sc">&lt;=</span> Criterio_no_ahorradores, <span class="dv">1</span>,</span>
<span id="cb433-3"><a href="experimental-design.html#cb433-3" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">ifelse</span>(data<span class="sc">$</span>Porcentaje_ahorro <span class="sc">&gt;=</span> Criterio_ahorradores, <span class="dv">0</span>, <span class="cn">NA</span></span>
<span id="cb433-4"><a href="experimental-design.html#cb433-4" aria-hidden="true" tabindex="-1"></a>                      ))</span>
<span id="cb433-5"><a href="experimental-design.html#cb433-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-6"><a href="experimental-design.html#cb433-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Cuantos tenemos en cada grupo?</span></span>
<span id="cb433-7"><a href="experimental-design.html#cb433-7" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(data<span class="sc">$</span>Ahorro)</span></code></pre></div>
<pre><code>## 
##   0   1 
## 113  66</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="experimental-design.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Limpiamos NAs en Ahorro y RUTs duplicados</span></span>
<span id="cb435-2"><a href="experimental-design.html#cb435-2" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> data[<span class="fu">complete.cases</span>(data),]</span>
<span id="cb435-3"><a href="experimental-design.html#cb435-3" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> data[<span class="sc">!</span><span class="fu">duplicated</span>(data<span class="sc">$</span>ID),]</span>
<span id="cb435-4"><a href="experimental-design.html#cb435-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-5"><a href="experimental-design.html#cb435-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Eliminamos a los Estudiantes</span></span>
<span id="cb435-6"><a href="experimental-design.html#cb435-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> data[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;studiante&quot;</span>, data<span class="sc">$</span>Ocupacion),]</span>
<span id="cb435-7"><a href="experimental-design.html#cb435-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb435-8"><a href="experimental-design.html#cb435-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Recreamos columna ID para los registros que quedan</span></span>
<span id="cb435-9"><a href="experimental-design.html#cb435-9" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>ID <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data))</span></code></pre></div>
<p>Realizamos el matching</p>
<p><strong>TODO: Como evaluamos si el matching es bueno?</strong></p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="experimental-design.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos base de parejas</span></span>
<span id="cb436-2"><a href="experimental-design.html#cb436-2" aria-hidden="true" tabindex="-1"></a>parejas <span class="ot">=</span> <span class="fu">as.data.frame</span>((optmatch<span class="sc">::</span><span class="fu">pairmatch</span>(Ahorro <span class="sc">~</span> Edad <span class="sc">+</span> Sexo <span class="sc">+</span> Educacion, <span class="at">data =</span> data)))</span>
<span id="cb436-3"><a href="experimental-design.html#cb436-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># caliper establece limites para los matchings</span></span>
<span id="cb436-4"><a href="experimental-design.html#cb436-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print(pairmatch(Ahorro ~ Edad + Sexo + Educacion, caliper = 4.9, data = data), grouped = TRUE)</span></span>
<span id="cb436-5"><a href="experimental-design.html#cb436-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb436-6"><a href="experimental-design.html#cb436-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Como evaluamos si es buena la seleccion?</span></span>
<span id="cb436-7"><a href="experimental-design.html#cb436-7" aria-hidden="true" tabindex="-1"></a><span class="co"># summary(lm(Ahorro ~ Edad + Sexo + Educacion, data = data))</span></span>
<span id="cb436-8"><a href="experimental-design.html#cb436-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb436-9"><a href="experimental-design.html#cb436-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Añadimos columna ID y renombramos columnas</span></span>
<span id="cb436-10"><a href="experimental-design.html#cb436-10" aria-hidden="true" tabindex="-1"></a>parejas<span class="sc">$</span>ID <span class="ot">=</span> <span class="fu">seq</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(data))</span>
<span id="cb436-11"><a href="experimental-design.html#cb436-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(parejas) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&quot;Group&quot;</span>, <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb436-12"><a href="experimental-design.html#cb436-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb436-13"><a href="experimental-design.html#cb436-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Combinamos ambas bases y limpiamos</span></span>
<span id="cb436-14"><a href="experimental-design.html#cb436-14" aria-hidden="true" tabindex="-1"></a>datos_combinados <span class="ot">=</span> <span class="fu">merge</span>(data, parejas, <span class="at">by =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb436-15"><a href="experimental-design.html#cb436-15" aria-hidden="true" tabindex="-1"></a>datos_combinados <span class="ot">=</span> datos_combinados[<span class="fu">complete.cases</span>(datos_combinados),]</span>
<span id="cb436-16"><a href="experimental-design.html#cb436-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb436-17"><a href="experimental-design.html#cb436-17" aria-hidden="true" tabindex="-1"></a><span class="co">#Ordenamos por Num de grupo y Ahorro</span></span>
<span id="cb436-18"><a href="experimental-design.html#cb436-18" aria-hidden="true" tabindex="-1"></a>datos_finales <span class="ot">=</span> datos_combinados <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(Group, Ahorro)</span></code></pre></div>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="experimental-design.html#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Cuantos en cada grupo?</span></span>
<span id="cb437-2"><a href="experimental-design.html#cb437-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(datos_finales<span class="sc">$</span>Ahorro)</span></code></pre></div>
<pre><code>## 
##  0  1 
## 58 58</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="experimental-design.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="co"># datos_finales %&gt;% dplyr::select(Edad, Sexo, Educacion, Porcentaje_ahorro)</span></span></code></pre></div>

</div>
<div id="determine-distribution" class="section level2" number="13.5">
<h2><span class="header-section-number">13.5</span> Determine distribution</h2>
<p>FROM: <a href="https://stats.stackexchange.com/questions/132652/how-to-determine-which-distribution-fits-my-data-best" class="uri">https://stats.stackexchange.com/questions/132652/how-to-determine-which-distribution-fits-my-data-best</a></p>
<p>Which ditribution best fits our data.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="experimental-design.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;fitdistrplus&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;fitdistrplus&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;fitdistrplus&#39;</span>)</span>
<span id="cb440-2"><a href="experimental-design.html#cb440-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="sc">!</span><span class="fu">require</span>(<span class="st">&#39;logspline&#39;</span>)) <span class="fu">install.packages</span>(<span class="st">&#39;logspline&#39;</span>); <span class="fu">library</span>(<span class="st">&#39;logspline&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="experimental-design.html#cb441-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">37.50</span>,<span class="fl">46.79</span>,<span class="fl">48.30</span>,<span class="fl">46.04</span>,<span class="fl">43.40</span>,<span class="fl">39.25</span>,<span class="fl">38.49</span>,<span class="fl">49.51</span>,<span class="fl">40.38</span>,<span class="fl">36.98</span>,<span class="fl">40.00</span>,</span>
<span id="cb441-2"><a href="experimental-design.html#cb441-2" aria-hidden="true" tabindex="-1"></a>       <span class="fl">38.49</span>,<span class="fl">37.74</span>,<span class="fl">47.92</span>,<span class="fl">44.53</span>,<span class="fl">44.91</span>,<span class="fl">44.91</span>,<span class="fl">40.00</span>,<span class="fl">41.51</span>,<span class="fl">47.92</span>,<span class="fl">36.98</span>,<span class="fl">43.40</span>,</span>
<span id="cb441-3"><a href="experimental-design.html#cb441-3" aria-hidden="true" tabindex="-1"></a>       <span class="fl">42.26</span>,<span class="fl">41.89</span>,<span class="fl">38.87</span>,<span class="fl">43.02</span>,<span class="fl">39.25</span>,<span class="fl">40.38</span>,<span class="fl">42.64</span>,<span class="fl">36.98</span>,<span class="fl">44.15</span>,<span class="fl">44.91</span>,<span class="fl">43.40</span>,</span>
<span id="cb441-4"><a href="experimental-design.html#cb441-4" aria-hidden="true" tabindex="-1"></a>       <span class="fl">49.81</span>,<span class="fl">38.87</span>,<span class="fl">40.00</span>,<span class="fl">52.45</span>,<span class="fl">53.13</span>,<span class="fl">47.92</span>,<span class="fl">52.45</span>,<span class="fl">44.91</span>,<span class="fl">29.54</span>,<span class="fl">27.13</span>,<span class="fl">35.60</span>,</span>
<span id="cb441-5"><a href="experimental-design.html#cb441-5" aria-hidden="true" tabindex="-1"></a>       <span class="fl">45.34</span>,<span class="fl">43.37</span>,<span class="fl">54.15</span>,<span class="fl">42.77</span>,<span class="fl">42.88</span>,<span class="fl">44.26</span>,<span class="fl">27.14</span>,<span class="fl">39.31</span>,<span class="fl">24.80</span>,<span class="fl">16.62</span>,<span class="fl">30.30</span>,</span>
<span id="cb441-6"><a href="experimental-design.html#cb441-6" aria-hidden="true" tabindex="-1"></a>       <span class="fl">36.39</span>,<span class="fl">28.60</span>,<span class="fl">28.53</span>,<span class="fl">35.84</span>,<span class="fl">31.10</span>,<span class="fl">34.55</span>,<span class="fl">52.65</span>,<span class="fl">48.81</span>,<span class="fl">43.42</span>,<span class="fl">52.49</span>,<span class="fl">38.00</span>,</span>
<span id="cb441-7"><a href="experimental-design.html#cb441-7" aria-hidden="true" tabindex="-1"></a>       <span class="fl">38.65</span>,<span class="fl">34.54</span>,<span class="fl">37.70</span>,<span class="fl">38.11</span>,<span class="fl">43.05</span>,<span class="fl">29.95</span>,<span class="fl">32.48</span>,<span class="fl">24.63</span>,<span class="fl">35.33</span>,<span class="fl">41.34</span>)</span>
<span id="cb441-8"><a href="experimental-design.html#cb441-8" aria-hidden="true" tabindex="-1"></a><span class="fu">descdist</span>(x, <span class="at">discrete =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/11-04-Determine_distribution-1-1.png" width="672" /></p>
<pre><code>## summary statistics
## ------
## min:  16.62   max:  54.15 
## median:  40.38 
## mean:  40.28434 
## estimated sd:  7.420034 
## estimated skewness:  -0.551717 
## estimated kurtosis:  3.565162</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="pre-processing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="classification.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
